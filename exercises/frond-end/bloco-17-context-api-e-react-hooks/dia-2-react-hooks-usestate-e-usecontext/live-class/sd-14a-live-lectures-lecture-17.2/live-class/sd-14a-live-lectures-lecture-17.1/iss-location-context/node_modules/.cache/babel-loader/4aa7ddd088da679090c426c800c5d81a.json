{"ast":null,"code":"import React, { Component, useState } from 'react';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction debounce(func, wait) {\n  var timeout;\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var context = this;\n    clearTimeout(timeout);\n    timeout = setTimeout(function () {\n      return func.apply(context, args);\n    }, wait);\n  };\n}\n\nfunction parentHasClass(element, className) {\n  while (element) {\n    if (element.classList && element.classList.contains(className)) {\n      return true;\n    }\n\n    element = element.parentElement;\n  }\n\n  return false;\n}\n\nfunction parentPosition(element) {\n  var rect = element.getBoundingClientRect();\n  return {\n    x: rect.left,\n    y: rect.top\n  };\n}\n\nvar ANIMATION_TIME = 300;\nvar DIAGONAL_THROW_TIME = 1500;\nvar SCROLL_PIXELS_FOR_ZOOM_LEVEL = 150;\nvar MIN_DRAG_FOR_THROW = 40;\nvar CLICK_TOLERANCE = 2;\nvar DOUBLE_CLICK_DELAY = 300;\nvar DEBOUNCE_DELAY = 60;\nvar PINCH_RELEASE_THROW_DELAY = 300;\nvar WARNING_DISPLAY_TIMEOUT = 300;\n\nvar NOOP = function NOOP() {\n  return true;\n};\n\nfunction stamenToner(x, y, z, dpr) {\n  return \"https://stamen-tiles.a.ssl.fastly.net/toner/\" + z + \"/\" + x + \"/\" + y + (dpr >= 2 ? '@2x' : '') + \".png\";\n}\n\nvar lng2tile = function lng2tile(lon, zoom) {\n  return (lon + 180) / 360 * Math.pow(2, zoom);\n};\n\nvar lat2tile = function lat2tile(lat, zoom) {\n  return (1 - Math.log(Math.tan(lat * Math.PI / 180) + 1 / Math.cos(lat * Math.PI / 180)) / Math.PI) / 2 * Math.pow(2, zoom);\n};\n\nfunction tile2lng(x, z) {\n  return x / Math.pow(2, z) * 360 - 180;\n}\n\nfunction tile2lat(y, z) {\n  var n = Math.PI - 2 * Math.PI * y / Math.pow(2, z);\n  return 180 / Math.PI * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n)));\n}\n\nfunction getMousePixel(dom, event) {\n  var parent = parentPosition(dom);\n  return [event.clientX - parent.x, event.clientY - parent.y];\n}\n\nfunction easeOutQuad(t) {\n  return t * (2 - t);\n}\n\nvar absoluteMinMax = [tile2lat(Math.pow(2, 10), 10), tile2lat(0, 10), tile2lng(0, 10), tile2lng(Math.pow(2, 10), 10)];\nvar hasWindow = typeof window !== 'undefined';\nvar performanceNow = hasWindow && window.performance && window.performance.now ? function () {\n  return window.performance.now();\n} : function () {\n  var timeStart = new Date().getTime();\n  return function () {\n    return new Date().getTime() - timeStart;\n  };\n}();\n\nvar requestAnimationFrame = function requestAnimationFrame(callback) {\n  if (hasWindow) {\n    return (window.requestAnimationFrame || window.setTimeout)(callback);\n  } else {\n    callback(new Date().getTime());\n    return null;\n  }\n};\n\nvar cancelAnimationFrame = function cancelAnimationFrame(animFrame) {\n  return hasWindow && animFrame ? (window.cancelAnimationFrame || window.clearTimeout)(animFrame) : false;\n};\n\nfunction srcSet(dprs, url, x, y, z) {\n  if (!dprs || dprs.length === 0) {\n    return '';\n  }\n\n  return dprs.map(function (dpr) {\n    return url(x, y, z, dpr) + (dpr === 1 ? '' : \" \" + dpr + \"x\");\n  }).join(', ');\n}\n\nvar Map = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Map, _Component);\n\n  function Map(props) {\n    var _ref, _props$defaultZoom, _ref2, _props$defaultCenter, _ref3, _props$width, _ref4, _props$height;\n\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n    _this._dragStart = null;\n    _this._mouseDown = false;\n    _this._moveEvents = [];\n    _this._lastClick = null;\n    _this._lastTap = null;\n    _this._lastWheel = null;\n    _this._touchStartPixel = null;\n    _this._touchStartMidPoint = null;\n    _this._touchStartDistance = null;\n    _this._secondTouchEnd = null;\n    _this._warningClearTimeout = null;\n    _this._isAnimating = false;\n    _this._animationStart = null;\n    _this._animationEnd = null;\n    _this._zoomStart = null;\n    _this._centerTarget = null;\n    _this._zoomTarget = null;\n    _this._zoomAround = null;\n    _this._animFrame = null;\n    _this._boundsSynced = false;\n    _this._minMaxCache = null;\n\n    _this.updateWidthHeight = function () {\n      if (_this._containerRef) {\n        var rect = _this._containerRef.getBoundingClientRect();\n\n        if (rect && rect.width > 0 && rect.height > 0) {\n          _this.setState({\n            width: rect.width,\n            height: rect.height\n          });\n\n          return true;\n        }\n      }\n\n      return false;\n    };\n\n    _this.wa = function () {\n      var _window;\n\n      return (_window = window).addEventListener.apply(_window, arguments);\n    };\n\n    _this.wr = function () {\n      var _window2;\n\n      return (_window2 = window).removeEventListener.apply(_window2, arguments);\n    };\n\n    _this.bindMouseEvents = function () {\n      _this.wa('mousedown', _this.handleMouseDown);\n\n      _this.wa('mouseup', _this.handleMouseUp);\n\n      _this.wa('mousemove', _this.handleMouseMove);\n    };\n\n    _this.bindTouchEvents = function () {\n      _this.wa('touchstart', _this.handleTouchStart, {\n        passive: false\n      });\n\n      _this.wa('touchmove', _this.handleTouchMove, {\n        passive: false\n      });\n\n      _this.wa('touchend', _this.handleTouchEnd, {\n        passive: false\n      });\n    };\n\n    _this.unbindMouseEvents = function () {\n      _this.wr('mousedown', _this.handleMouseDown);\n\n      _this.wr('mouseup', _this.handleMouseUp);\n\n      _this.wr('mousemove', _this.handleMouseMove);\n    };\n\n    _this.unbindTouchEvents = function () {\n      _this.wr('touchstart', _this.handleTouchStart);\n\n      _this.wr('touchmove', _this.handleTouchMove);\n\n      _this.wr('touchend', _this.handleTouchEnd);\n    };\n\n    _this.bindResizeEvent = function () {\n      _this.wa('resize', _this.updateWidthHeight);\n    };\n\n    _this.unbindResizeEvent = function () {\n      _this.wr('resize', _this.updateWidthHeight);\n    };\n\n    _this.bindWheelEvent = function () {\n      if (_this._containerRef) {\n        _this._containerRef.addEventListener('wheel', _this.handleWheel, {\n          passive: false\n        });\n      }\n    };\n\n    _this.unbindWheelEvent = function () {\n      if (_this._containerRef) {\n        _this._containerRef.removeEventListener('wheel', _this.handleWheel);\n      }\n    };\n\n    _this.setCenterZoomTarget = function (center, zoom, fromProps, zoomAround, animationDuration) {\n      if (fromProps === void 0) {\n        fromProps = false;\n      }\n\n      if (zoomAround === void 0) {\n        zoomAround = null;\n      }\n\n      if (animationDuration === void 0) {\n        animationDuration = ANIMATION_TIME;\n      }\n\n      if (_this.props.animate && (!fromProps || _this.distanceInScreens(center, zoom, _this.state.center, _this.state.zoom) <= _this.props.animateMaxScreens)) {\n        if (_this._isAnimating) {\n          cancelAnimationFrame(_this._animFrame);\n\n          var _this$animationStep = _this.animationStep(performanceNow()),\n              centerStep = _this$animationStep.centerStep,\n              zoomStep = _this$animationStep.zoomStep;\n\n          _this._centerStart = centerStep;\n          _this._zoomStart = zoomStep;\n        } else {\n          _this._isAnimating = true;\n          _this._centerStart = _this.limitCenterAtZoom([_this._lastCenter[0], _this._lastCenter[1]], _this._lastZoom);\n          _this._zoomStart = _this._lastZoom;\n\n          _this.onAnimationStart();\n        }\n\n        _this._animationStart = performanceNow();\n        _this._animationEnd = _this._animationStart + animationDuration;\n\n        if (zoomAround) {\n          _this._zoomAround = zoomAround;\n          _this._centerTarget = _this.calculateZoomCenter(_this._lastCenter, zoomAround, _this._lastZoom, zoom);\n        } else {\n          _this._zoomAround = null;\n          _this._centerTarget = center;\n        }\n\n        _this._zoomTarget = zoom;\n        _this._animFrame = requestAnimationFrame(_this.animate);\n      } else {\n        _this.stopAnimating();\n\n        if (zoomAround) {\n          var _center = _this.calculateZoomCenter(_this._lastCenter, zoomAround, _this._lastZoom, zoom);\n\n          _this.setCenterZoom(_center, zoom, fromProps);\n        } else {\n          _this.setCenterZoom(center || _this.state.center, zoom, fromProps);\n        }\n      }\n    };\n\n    _this.distanceInScreens = function (centerTarget, zoomTarget, center, zoom) {\n      var _this$state = _this.state,\n          width = _this$state.width,\n          height = _this$state.height;\n\n      var l1 = _this.latLngToPixel(center, center, zoom);\n\n      var l2 = _this.latLngToPixel(centerTarget, center, zoom);\n\n      var z1 = _this.latLngToPixel(center, center, zoomTarget);\n\n      var z2 = _this.latLngToPixel(centerTarget, center, zoomTarget);\n\n      var w = (Math.abs(l1[0] - l2[0]) + Math.abs(z1[0] - z2[0])) / 2 / width;\n      var h = (Math.abs(l1[1] - l2[1]) + Math.abs(z1[1] - z2[1])) / 2 / height;\n      return Math.sqrt(w * w + h * h);\n    };\n\n    _this.animationStep = function (timestamp) {\n      if (!_this._animationEnd || !_this._animationStart || !_this._zoomTarget || !_this._zoomStart || !_this._centerStart || !_this._centerTarget) {\n        return {\n          centerStep: _this.state.center,\n          zoomStep: _this.state.zoom\n        };\n      }\n\n      var length = _this._animationEnd - _this._animationStart;\n      var progress = Math.max(timestamp - _this._animationStart, 0);\n      var percentage = easeOutQuad(progress / length);\n      var zoomDiff = (_this._zoomTarget - _this._zoomStart) * percentage;\n      var zoomStep = _this._zoomStart + zoomDiff;\n\n      if (_this._zoomAround) {\n        var centerStep = _this.calculateZoomCenter(_this._centerStart, _this._zoomAround, _this._zoomStart, zoomStep);\n\n        return {\n          centerStep: centerStep,\n          zoomStep: zoomStep\n        };\n      } else {\n        var _centerStep = [_this._centerStart[0] + (_this._centerTarget[0] - _this._centerStart[0]) * percentage, _this._centerStart[1] + (_this._centerTarget[1] - _this._centerStart[1]) * percentage];\n        return {\n          centerStep: _centerStep,\n          zoomStep: zoomStep\n        };\n      }\n    };\n\n    _this.animate = function (timestamp) {\n      if (!_this._animationEnd || timestamp >= _this._animationEnd) {\n        _this._isAnimating = false;\n\n        _this.setCenterZoom(_this._centerTarget, _this._zoomTarget, true);\n\n        _this.onAnimationStop();\n      } else {\n        var _this$animationStep2 = _this.animationStep(timestamp),\n            centerStep = _this$animationStep2.centerStep,\n            zoomStep = _this$animationStep2.zoomStep;\n\n        _this.setCenterZoom(centerStep, zoomStep);\n\n        _this._animFrame = requestAnimationFrame(_this.animate);\n      }\n    };\n\n    _this.stopAnimating = function () {\n      if (_this._isAnimating) {\n        _this._isAnimating = false;\n\n        _this.onAnimationStop();\n\n        cancelAnimationFrame(_this._animFrame);\n      }\n    };\n\n    _this.limitCenterAtZoom = function (center, zoom) {\n      var minMax = _this.getBoundsMinMax(zoom || _this.state.zoom);\n\n      return [Math.max(Math.min(!center || isNaN(center[0]) ? _this.state.center[0] : center[0], minMax[1]), minMax[0]), Math.max(Math.min(!center || isNaN(center[1]) ? _this.state.center[1] : center[1], minMax[3]), minMax[2])];\n    };\n\n    _this.onAnimationStart = function () {\n      _this.props.onAnimationStart && _this.props.onAnimationStart();\n    };\n\n    _this.onAnimationStop = function () {\n      _this.props.onAnimationStop && _this.props.onAnimationStop();\n    };\n\n    _this.setCenterZoom = function (center, zoom, animationEnded) {\n      if (animationEnded === void 0) {\n        animationEnded = false;\n      }\n\n      var limitedCenter = _this.limitCenterAtZoom(center, zoom);\n\n      if (zoom && Math.round(_this.state.zoom) !== Math.round(zoom)) {\n        var tileValues = _this.tileValues(_this.state);\n\n        var nextValues = _this.tileValues({\n          center: limitedCenter,\n          zoom: zoom,\n          width: _this.state.width,\n          height: _this.state.height\n        });\n\n        var oldTiles = _this.state.oldTiles;\n\n        _this.setState({\n          oldTiles: oldTiles.filter(function (o) {\n            return o.roundedZoom !== tileValues.roundedZoom;\n          }).concat(tileValues)\n        }, NOOP);\n\n        var loadTracker = {};\n\n        for (var x = nextValues.tileMinX; x <= nextValues.tileMaxX; x++) {\n          for (var y = nextValues.tileMinY; y <= nextValues.tileMaxY; y++) {\n            var key = x + \"-\" + y + \"-\" + nextValues.roundedZoom;\n            loadTracker[key] = false;\n          }\n        }\n\n        _this._loadTracker = loadTracker;\n      }\n\n      _this.setState({\n        center: limitedCenter,\n        zoom: zoom || _this.state.zoom\n      }, NOOP);\n\n      var maybeZoom = _this.props.zoom ? _this.props.zoom : _this._lastZoom;\n      var maybeCenter = _this.props.center ? _this.props.center : _this._lastCenter;\n\n      if (zoom && (animationEnded || Math.abs(maybeZoom - zoom) > 0.001 || Math.abs(maybeCenter[0] - limitedCenter[0]) > 0.00001 || Math.abs(maybeCenter[1] - limitedCenter[1]) > 0.00001)) {\n        _this._lastZoom = zoom;\n        _this._lastCenter = [].concat(limitedCenter);\n\n        _this.syncToProps(limitedCenter, zoom);\n      }\n    };\n\n    _this.getBoundsMinMax = function (zoom) {\n      if (_this.props.limitBounds === 'center') {\n        return absoluteMinMax;\n      }\n\n      var _this$state2 = _this.state,\n          width = _this$state2.width,\n          height = _this$state2.height;\n\n      if (_this._minMaxCache && _this._minMaxCache[0] === zoom && _this._minMaxCache[1] === width && _this._minMaxCache[2] === height) {\n        return _this._minMaxCache[3];\n      }\n\n      var pixelsAtZoom = Math.pow(2, zoom) * 256;\n      var minLng = width > pixelsAtZoom ? 0 : tile2lng(width / 512, zoom);\n      var minLat = height > pixelsAtZoom ? 0 : tile2lat(Math.pow(2, zoom) - height / 512, zoom);\n      var maxLng = width > pixelsAtZoom ? 0 : tile2lng(Math.pow(2, zoom) - width / 512, zoom);\n      var maxLat = height > pixelsAtZoom ? 0 : tile2lat(height / 512, zoom);\n      var minMax = [minLat, maxLat, minLng, maxLng];\n      _this._minMaxCache = [zoom, width, height, minMax];\n      return minMax;\n    };\n\n    _this.imageLoaded = function (key) {\n      if (_this._loadTracker && key in _this._loadTracker) {\n        _this._loadTracker[key] = true;\n        var unloadedCount = Object.values(_this._loadTracker).filter(function (v) {\n          return !v;\n        }).length;\n\n        if (unloadedCount === 0) {\n          _this.setState({\n            oldTiles: []\n          }, NOOP);\n        }\n      }\n    };\n\n    _this.handleTouchStart = function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      if (event.target && parentHasClass(event.target, 'pigeon-drag-block')) {\n        return;\n      }\n\n      if (event.touches.length === 1) {\n        var touch = event.touches[0];\n        var pixel = getMousePixel(_this._containerRef, touch);\n\n        if (_this.coordsInside(pixel)) {\n          _this._touchStartPixel = [pixel];\n\n          if (!_this.props.twoFingerDrag) {\n            _this.stopAnimating();\n\n            if (_this._lastTap && performanceNow() - _this._lastTap < DOUBLE_CLICK_DELAY) {\n              event.preventDefault();\n\n              var latLngNow = _this.pixelToLatLng(_this._touchStartPixel[0]);\n\n              _this.setCenterZoomTarget(null, Math.max(_this.props.minZoom, Math.min(_this.state.zoom + 1, _this.props.maxZoom)), false, latLngNow);\n            } else {\n              _this._lastTap = performanceNow();\n\n              _this.trackMoveEvents(pixel);\n            }\n          }\n        }\n      } else if (event.touches.length === 2 && _this._touchStartPixel) {\n        event.preventDefault();\n\n        _this.stopTrackingMoveEvents();\n\n        if (_this.state.pixelDelta || _this.state.zoomDelta) {\n          _this.sendDeltaChange();\n        }\n\n        var t1 = getMousePixel(_this._containerRef, event.touches[0]);\n        var t2 = getMousePixel(_this._containerRef, event.touches[1]);\n        _this._touchStartPixel = [t1, t2];\n        _this._touchStartMidPoint = [(t1[0] + t2[0]) / 2, (t1[1] + t2[1]) / 2];\n        _this._touchStartDistance = Math.sqrt(Math.pow(t1[0] - t2[0], 2) + Math.pow(t1[1] - t2[1], 2));\n      }\n    };\n\n    _this.handleTouchMove = function (event) {\n      if (!_this._containerRef) {\n        _this._touchStartPixel = null;\n        return;\n      }\n\n      if (event.touches.length === 1 && _this._touchStartPixel) {\n        var touch = event.touches[0];\n        var pixel = getMousePixel(_this._containerRef, touch);\n\n        if (_this.props.twoFingerDrag) {\n          if (_this.coordsInside(pixel)) {\n            _this.showWarning('fingers');\n          }\n        } else {\n          event.preventDefault();\n\n          _this.trackMoveEvents(pixel);\n\n          _this.setState({\n            pixelDelta: [pixel[0] - _this._touchStartPixel[0][0], pixel[1] - _this._touchStartPixel[0][1]]\n          }, NOOP);\n        }\n      } else if (event.touches.length === 2 && _this._touchStartPixel && _this._touchStartMidPoint && _this._touchStartDistance) {\n        var _this$state3 = _this.state,\n            width = _this$state3.width,\n            height = _this$state3.height,\n            zoom = _this$state3.zoom;\n        event.preventDefault();\n        var t1 = getMousePixel(_this._containerRef, event.touches[0]);\n        var t2 = getMousePixel(_this._containerRef, event.touches[1]);\n        var midPoint = [(t1[0] + t2[0]) / 2, (t1[1] + t2[1]) / 2];\n        var midPointDiff = [midPoint[0] - _this._touchStartMidPoint[0], midPoint[1] - _this._touchStartMidPoint[1]];\n        var distance = Math.sqrt(Math.pow(t1[0] - t2[0], 2) + Math.pow(t1[1] - t2[1], 2));\n        var zoomDelta = Math.max(_this.props.minZoom, Math.min(_this.props.maxZoom, zoom + Math.log2(distance / _this._touchStartDistance))) - zoom;\n        var scale = Math.pow(2, zoomDelta);\n        var centerDiffDiff = [(width / 2 - midPoint[0]) * (scale - 1), (height / 2 - midPoint[1]) * (scale - 1)];\n\n        _this.setState({\n          zoomDelta: zoomDelta,\n          pixelDelta: [centerDiffDiff[0] + midPointDiff[0] * scale, centerDiffDiff[1] + midPointDiff[1] * scale]\n        }, NOOP);\n      }\n    };\n\n    _this.handleTouchEnd = function (event) {\n      if (!_this._containerRef) {\n        _this._touchStartPixel = null;\n        return;\n      }\n\n      if (_this._touchStartPixel) {\n        var _this$props = _this.props,\n            zoomSnap = _this$props.zoomSnap,\n            twoFingerDrag = _this$props.twoFingerDrag,\n            minZoom = _this$props.minZoom,\n            maxZoom = _this$props.maxZoom;\n        var zoomDelta = _this.state.zoomDelta;\n\n        var _this$sendDeltaChange = _this.sendDeltaChange(),\n            center = _this$sendDeltaChange.center,\n            zoom = _this$sendDeltaChange.zoom;\n\n        if (event.touches.length === 0) {\n          if (twoFingerDrag) {\n            _this.clearWarning();\n          } else {\n            var oldTouchPixel = _this._touchStartPixel[0];\n            var newTouchPixel = getMousePixel(_this._containerRef, event.changedTouches[0]);\n\n            if (Math.abs(oldTouchPixel[0] - newTouchPixel[0]) > CLICK_TOLERANCE || Math.abs(oldTouchPixel[1] - newTouchPixel[1]) > CLICK_TOLERANCE) {\n              if (!_this._secondTouchEnd || performanceNow() - _this._secondTouchEnd > PINCH_RELEASE_THROW_DELAY) {\n                event.preventDefault();\n\n                _this.throwAfterMoving(newTouchPixel, center, zoom);\n              }\n            }\n\n            _this._touchStartPixel = null;\n            _this._secondTouchEnd = null;\n          }\n        } else if (event.touches.length === 1) {\n          event.preventDefault();\n          var touch = getMousePixel(_this._containerRef, event.touches[0]);\n          _this._secondTouchEnd = performanceNow();\n          _this._touchStartPixel = [touch];\n\n          _this.trackMoveEvents(touch);\n\n          if (zoomSnap) {\n            var latLng = _this._touchStartMidPoint ? _this.pixelToLatLng(_this._touchStartMidPoint) : _this.state.center;\n            var zoomTarget;\n\n            if (twoFingerDrag && Math.round(_this.state.zoom) === Math.round(_this.state.zoom + zoomDelta)) {\n              zoomTarget = Math.round(_this.state.zoom);\n            } else {\n              zoomTarget = zoomDelta > 0 ? Math.ceil(_this.state.zoom) : Math.floor(_this.state.zoom);\n            }\n\n            var _zoom = Math.max(minZoom, Math.min(zoomTarget, maxZoom));\n\n            _this.setCenterZoomTarget(latLng, _zoom, false, latLng);\n          }\n        }\n      }\n    };\n\n    _this.handleMouseDown = function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      var pixel = getMousePixel(_this._containerRef, event);\n\n      if (event.button === 0 && (!event.target || !parentHasClass(event.target, 'pigeon-drag-block')) && _this.coordsInside(pixel)) {\n        _this.stopAnimating();\n\n        event.preventDefault();\n\n        if (_this._lastClick && performanceNow() - _this._lastClick < DOUBLE_CLICK_DELAY) {\n          var latLngNow = _this.pixelToLatLng(_this._mousePosition || pixel);\n\n          _this.setCenterZoomTarget(null, Math.max(_this.props.minZoom, Math.min(_this.state.zoom + 1, _this.props.maxZoom)), false, latLngNow);\n        } else {\n          _this._lastClick = performanceNow();\n          _this._mouseDown = true;\n          _this._dragStart = pixel;\n\n          _this.trackMoveEvents(pixel);\n        }\n      }\n    };\n\n    _this.handleMouseMove = function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      _this._mousePosition = getMousePixel(_this._containerRef, event);\n\n      if (_this._mouseDown && _this._dragStart) {\n        _this.trackMoveEvents(_this._mousePosition);\n\n        _this.setState({\n          pixelDelta: [_this._mousePosition[0] - _this._dragStart[0], _this._mousePosition[1] - _this._dragStart[1]]\n        }, NOOP);\n      }\n    };\n\n    _this.handleMouseUp = function (event) {\n      if (!_this._containerRef) {\n        _this._mouseDown = false;\n        return;\n      }\n\n      var pixelDelta = _this.state.pixelDelta;\n\n      if (_this._mouseDown) {\n        _this._mouseDown = false;\n        var pixel = getMousePixel(_this._containerRef, event);\n\n        if (_this.props.onClick && (!event.target || !parentHasClass(event.target, 'pigeon-click-block')) && (!pixelDelta || Math.abs(pixelDelta[0]) + Math.abs(pixelDelta[1]) <= CLICK_TOLERANCE)) {\n          var latLng = _this.pixelToLatLng(pixel);\n\n          _this.props.onClick({\n            event: event,\n            latLng: latLng,\n            pixel: pixel\n          });\n\n          _this.setState({\n            pixelDelta: undefined\n          }, NOOP);\n        } else {\n          var _this$sendDeltaChange2 = _this.sendDeltaChange(),\n              center = _this$sendDeltaChange2.center,\n              zoom = _this$sendDeltaChange2.zoom;\n\n          _this.throwAfterMoving(pixel, center, zoom);\n        }\n      }\n    };\n\n    _this.stopTrackingMoveEvents = function () {\n      _this._moveEvents = [];\n    };\n\n    _this.trackMoveEvents = function (coords) {\n      var timestamp = performanceNow();\n\n      if (_this._moveEvents.length === 0 || timestamp - _this._moveEvents[_this._moveEvents.length - 1].timestamp > 40) {\n        _this._moveEvents.push({\n          timestamp: timestamp,\n          coords: coords\n        });\n\n        if (_this._moveEvents.length > 2) {\n          _this._moveEvents.shift();\n        }\n      }\n    };\n\n    _this.throwAfterMoving = function (coords, center, zoom) {\n      var _this$state4 = _this.state,\n          width = _this$state4.width,\n          height = _this$state4.height;\n      var animate = _this.props.animate;\n      var timestamp = performanceNow();\n\n      var lastEvent = _this._moveEvents.shift();\n\n      if (lastEvent && animate) {\n        var deltaMs = Math.max(timestamp - lastEvent.timestamp, 1);\n        var delta = [(coords[0] - lastEvent.coords[0]) / deltaMs * 120, (coords[1] - lastEvent.coords[1]) / deltaMs * 120];\n        var distance = Math.sqrt(delta[0] * delta[0] + delta[1] * delta[1]);\n\n        if (distance > MIN_DRAG_FOR_THROW) {\n          var diagonal = Math.sqrt(width * width + height * height);\n          var throwTime = DIAGONAL_THROW_TIME * distance / diagonal;\n          var lng = tile2lng(lng2tile(center[1], zoom) - delta[0] / 256.0, zoom);\n          var lat = tile2lat(lat2tile(center[0], zoom) - delta[1] / 256.0, zoom);\n\n          _this.setCenterZoomTarget([lat, lng], zoom, false, null, throwTime);\n        }\n      }\n\n      _this.stopTrackingMoveEvents();\n    };\n\n    _this.sendDeltaChange = function () {\n      var _this$state5 = _this.state,\n          center = _this$state5.center,\n          zoom = _this$state5.zoom,\n          pixelDelta = _this$state5.pixelDelta,\n          zoomDelta = _this$state5.zoomDelta;\n      var lat = center[0];\n      var lng = center[1];\n\n      if (pixelDelta || zoomDelta !== 0) {\n        lng = tile2lng(lng2tile(center[1], zoom + zoomDelta) - (pixelDelta ? pixelDelta[0] / 256.0 : 0), zoom + zoomDelta);\n        lat = tile2lat(lat2tile(center[0], zoom + zoomDelta) - (pixelDelta ? pixelDelta[1] / 256.0 : 0), zoom + zoomDelta);\n\n        _this.setCenterZoom([lat, lng], zoom + zoomDelta);\n      }\n\n      _this.setState({\n        pixelDelta: undefined,\n        zoomDelta: 0\n      }, NOOP);\n\n      return {\n        center: _this.limitCenterAtZoom([lat, lng], zoom + zoomDelta),\n        zoom: zoom + zoomDelta\n      };\n    };\n\n    _this.getBounds = function (center, zoom) {\n      if (center === void 0) {\n        center = _this.state.center;\n      }\n\n      if (zoom === void 0) {\n        zoom = _this.zoomPlusDelta();\n      }\n\n      var _this$state6 = _this.state,\n          width = _this$state6.width,\n          height = _this$state6.height;\n      return {\n        ne: _this.pixelToLatLng([width - 1, 0], center, zoom),\n        sw: _this.pixelToLatLng([0, height - 1], center, zoom)\n      };\n    };\n\n    _this.syncToProps = function (center, zoom) {\n      if (center === void 0) {\n        center = _this.state.center;\n      }\n\n      if (zoom === void 0) {\n        zoom = _this.state.zoom;\n      }\n\n      var onBoundsChanged = _this.props.onBoundsChanged;\n\n      if (onBoundsChanged) {\n        var bounds = _this.getBounds(center, zoom);\n\n        onBoundsChanged({\n          center: center,\n          zoom: zoom,\n          bounds: bounds,\n          initial: !_this._boundsSynced\n        });\n        _this._boundsSynced = true;\n      }\n    };\n\n    _this.handleWheel = function (event) {\n      var _this$props2 = _this.props,\n          mouseEvents = _this$props2.mouseEvents,\n          metaWheelZoom = _this$props2.metaWheelZoom,\n          zoomSnap = _this$props2.zoomSnap,\n          animate = _this$props2.animate;\n\n      if (!mouseEvents) {\n        return;\n      }\n\n      if (!metaWheelZoom || event.metaKey) {\n        event.preventDefault();\n        var addToZoom = -event.deltaY / SCROLL_PIXELS_FOR_ZOOM_LEVEL;\n\n        if (!zoomSnap && _this._zoomTarget) {\n          var stillToAdd = _this._zoomTarget - _this.state.zoom;\n\n          _this.zoomAroundMouse(addToZoom + stillToAdd, event);\n        } else {\n          if (animate) {\n            _this.zoomAroundMouse(addToZoom, event);\n          } else {\n            if (!_this._lastWheel || performanceNow() - _this._lastWheel > ANIMATION_TIME) {\n              _this._lastWheel = performanceNow();\n\n              _this.zoomAroundMouse(addToZoom, event);\n            }\n          }\n        }\n      } else {\n        _this.showWarning('wheel');\n      }\n    };\n\n    _this.showWarning = function (warningType) {\n      if (!_this.state.showWarning || _this.state.warningType !== warningType) {\n        _this.setState({\n          showWarning: true,\n          warningType: warningType\n        });\n      }\n\n      if (_this._warningClearTimeout) {\n        window.clearTimeout(_this._warningClearTimeout);\n      }\n\n      _this._warningClearTimeout = window.setTimeout(_this.clearWarning, WARNING_DISPLAY_TIMEOUT);\n    };\n\n    _this.clearWarning = function () {\n      if (_this.state.showWarning) {\n        _this.setState({\n          showWarning: false\n        });\n      }\n    };\n\n    _this.zoomAroundMouse = function (zoomDiff, event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      var zoom = _this.state.zoom;\n      var _this$props3 = _this.props,\n          minZoom = _this$props3.minZoom,\n          maxZoom = _this$props3.maxZoom,\n          zoomSnap = _this$props3.zoomSnap;\n      _this._mousePosition = getMousePixel(_this._containerRef, event);\n\n      if (!_this._mousePosition || zoom === minZoom && zoomDiff < 0 || zoom === maxZoom && zoomDiff > 0) {\n        return;\n      }\n\n      var latLngNow = _this.pixelToLatLng(_this._mousePosition);\n\n      var zoomTarget = zoom + zoomDiff;\n\n      if (zoomSnap) {\n        zoomTarget = zoomDiff < 0 ? Math.floor(zoomTarget) : Math.ceil(zoomTarget);\n      }\n\n      zoomTarget = Math.max(minZoom, Math.min(zoomTarget, maxZoom));\n\n      _this.setCenterZoomTarget(null, zoomTarget, false, latLngNow);\n    };\n\n    _this.zoomPlusDelta = function () {\n      return _this.state.zoom + _this.state.zoomDelta;\n    };\n\n    _this.pixelToLatLng = function (pixel, center, zoom) {\n      if (center === void 0) {\n        center = _this.state.center;\n      }\n\n      if (zoom === void 0) {\n        zoom = _this.zoomPlusDelta();\n      }\n\n      var _this$state7 = _this.state,\n          width = _this$state7.width,\n          height = _this$state7.height,\n          pixelDelta = _this$state7.pixelDelta;\n      var pointDiff = [(pixel[0] - width / 2 - (pixelDelta ? pixelDelta[0] : 0)) / 256.0, (pixel[1] - height / 2 - (pixelDelta ? pixelDelta[1] : 0)) / 256.0];\n      var tileX = lng2tile(center[1], zoom) + pointDiff[0];\n      var tileY = lat2tile(center[0], zoom) + pointDiff[1];\n      return [Math.max(absoluteMinMax[0], Math.min(absoluteMinMax[1], tile2lat(tileY, zoom))), Math.max(absoluteMinMax[2], Math.min(absoluteMinMax[3], tile2lng(tileX, zoom)))];\n    };\n\n    _this.latLngToPixel = function (latLng, center, zoom) {\n      if (center === void 0) {\n        center = _this.state.center;\n      }\n\n      if (zoom === void 0) {\n        zoom = _this.zoomPlusDelta();\n      }\n\n      var _this$state8 = _this.state,\n          width = _this$state8.width,\n          height = _this$state8.height,\n          pixelDelta = _this$state8.pixelDelta;\n      var tileCenterX = lng2tile(center[1], zoom);\n      var tileCenterY = lat2tile(center[0], zoom);\n      var tileX = lng2tile(latLng[1], zoom);\n      var tileY = lat2tile(latLng[0], zoom);\n      return [(tileX - tileCenterX) * 256.0 + width / 2 + (pixelDelta ? pixelDelta[0] : 0), (tileY - tileCenterY) * 256.0 + height / 2 + (pixelDelta ? pixelDelta[1] : 0)];\n    };\n\n    _this.calculateZoomCenter = function (center, coords, oldZoom, newZoom) {\n      var _this$state9 = _this.state,\n          width = _this$state9.width,\n          height = _this$state9.height;\n\n      var pixelBefore = _this.latLngToPixel(coords, center, oldZoom);\n\n      var pixelAfter = _this.latLngToPixel(coords, center, newZoom);\n\n      var newCenter = _this.pixelToLatLng([width / 2 + pixelAfter[0] - pixelBefore[0], height / 2 + pixelAfter[1] - pixelBefore[1]], center, newZoom);\n\n      return _this.limitCenterAtZoom(newCenter, newZoom);\n    };\n\n    _this.setRef = function (dom) {\n      _this._containerRef = dom;\n    };\n\n    _this.syncToProps = debounce(_this.syncToProps, DEBOUNCE_DELAY);\n    _this._lastZoom = (_ref = (_props$defaultZoom = props.defaultZoom) !== null && _props$defaultZoom !== void 0 ? _props$defaultZoom : props.zoom) !== null && _ref !== void 0 ? _ref : 14;\n    _this._lastCenter = (_ref2 = (_props$defaultCenter = props.defaultCenter) !== null && _props$defaultCenter !== void 0 ? _props$defaultCenter : props.center) !== null && _ref2 !== void 0 ? _ref2 : [0, 0];\n    _this.state = {\n      zoom: _this._lastZoom,\n      center: _this._lastCenter,\n      width: (_ref3 = (_props$width = props.width) !== null && _props$width !== void 0 ? _props$width : props.defaultWidth) !== null && _ref3 !== void 0 ? _ref3 : -1,\n      height: (_ref4 = (_props$height = props.height) !== null && _props$height !== void 0 ? _props$height : props.defaultHeight) !== null && _ref4 !== void 0 ? _ref4 : -1,\n      zoomDelta: 0,\n      pixelDelta: undefined,\n      oldTiles: [],\n      showWarning: false,\n      warningType: undefined\n    };\n    return _this;\n  }\n\n  var _proto = Map.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.props.mouseEvents && this.bindMouseEvents();\n    this.props.touchEvents && this.bindTouchEvents();\n\n    if (!this.props.width || !this.props.height) {\n      if (!this.updateWidthHeight()) {\n        requestAnimationFrame(this.updateWidthHeight);\n      }\n\n      this.bindResizeEvent();\n    }\n\n    this.bindWheelEvent();\n    this.syncToProps();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.props.mouseEvents && this.unbindMouseEvents();\n    this.props.touchEvents && this.unbindTouchEvents();\n    this.unbindWheelEvent();\n\n    if (!this.props.width || !this.props.height) {\n      this.unbindResizeEvent();\n    }\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var _prevProps$center;\n\n    if (this.props.mouseEvents !== prevProps.mouseEvents) {\n      this.props.mouseEvents ? this.bindMouseEvents() : this.unbindMouseEvents();\n    }\n\n    if (this.props.touchEvents !== prevProps.touchEvents) {\n      this.props.touchEvents ? this.bindTouchEvents() : this.unbindTouchEvents();\n    }\n\n    if (this.props.width && this.props.width !== prevProps.width) {\n      this.setState({\n        width: this.props.width\n      });\n    }\n\n    if (this.props.height && this.props.height !== prevProps.height) {\n      this.setState({\n        height: this.props.height\n      });\n    }\n\n    if (!this.props.center && !this.props.zoom) {\n      return;\n    }\n\n    if ((!this.props.center || this.props.center[0] === (prevProps === null || prevProps === void 0 ? void 0 : (_prevProps$center = prevProps.center) === null || _prevProps$center === void 0 ? void 0 : _prevProps$center[0]) && this.props.center[1] === prevProps.center[1]) && this.props.zoom === prevProps.zoom) {\n      return;\n    }\n\n    var currentCenter = this._isAnimating ? this._centerTarget : this.state.center;\n    var currentZoom = this._isAnimating ? this._zoomTarget : this.state.zoom;\n\n    if (currentCenter && currentZoom) {\n      var _this$props$center, _this$props$zoom;\n\n      var nextCenter = (_this$props$center = this.props.center) !== null && _this$props$center !== void 0 ? _this$props$center : currentCenter;\n      var nextZoom = (_this$props$zoom = this.props.zoom) !== null && _this$props$zoom !== void 0 ? _this$props$zoom : currentZoom;\n\n      if (Math.abs(nextZoom - currentZoom) > 0.001 || Math.abs(nextCenter[0] - currentCenter[0]) > 0.0001 || Math.abs(nextCenter[1] - currentCenter[1]) > 0.0001) {\n        this.setCenterZoomTarget(nextCenter, nextZoom, true);\n      }\n    }\n  };\n\n  _proto.coordsInside = function coordsInside(pixel) {\n    var _this$state10 = this.state,\n        width = _this$state10.width,\n        height = _this$state10.height;\n\n    if (pixel[0] < 0 || pixel[1] < 0 || pixel[0] >= width || pixel[1] >= height) {\n      return false;\n    }\n\n    var parent = this._containerRef;\n\n    if (parent) {\n      var pos = parentPosition(parent);\n      var element = document.elementFromPoint(pixel[0] + pos.x, pixel[1] + pos.y);\n      return parent === element || parent.contains(element);\n    } else {\n      return false;\n    }\n  };\n\n  _proto.tileValues = function tileValues(_ref5) {\n    var center = _ref5.center,\n        zoom = _ref5.zoom,\n        pixelDelta = _ref5.pixelDelta,\n        zoomDelta = _ref5.zoomDelta,\n        width = _ref5.width,\n        height = _ref5.height;\n    var roundedZoom = Math.round(zoom + (zoomDelta || 0));\n    var zoomDiff = zoom + (zoomDelta || 0) - roundedZoom;\n    var scale = Math.pow(2, zoomDiff);\n    var scaleWidth = width / scale;\n    var scaleHeight = height / scale;\n    var tileCenterX = lng2tile(center[1], roundedZoom) - (pixelDelta ? pixelDelta[0] / 256.0 / scale : 0);\n    var tileCenterY = lat2tile(center[0], roundedZoom) - (pixelDelta ? pixelDelta[1] / 256.0 / scale : 0);\n    var halfWidth = scaleWidth / 2 / 256.0;\n    var halfHeight = scaleHeight / 2 / 256.0;\n    var tileMinX = Math.floor(tileCenterX - halfWidth);\n    var tileMaxX = Math.floor(tileCenterX + halfWidth);\n    var tileMinY = Math.floor(tileCenterY - halfHeight);\n    var tileMaxY = Math.floor(tileCenterY + halfHeight);\n    return {\n      tileMinX: tileMinX,\n      tileMaxX: tileMaxX,\n      tileMinY: tileMinY,\n      tileMaxY: tileMaxY,\n      tileCenterX: tileCenterX,\n      tileCenterY: tileCenterY,\n      roundedZoom: roundedZoom,\n      zoomDelta: zoomDelta || 0,\n      scaleWidth: scaleWidth,\n      scaleHeight: scaleHeight,\n      scale: scale\n    };\n  };\n\n  _proto.renderTiles = function renderTiles() {\n    var _this2 = this;\n\n    var oldTiles = this.state.oldTiles;\n    var dprs = this.props.dprs;\n    var mapUrl = this.props.provider || stamenToner;\n\n    var _this$tileValues = this.tileValues(this.state),\n        tileMinX = _this$tileValues.tileMinX,\n        tileMaxX = _this$tileValues.tileMaxX,\n        tileMinY = _this$tileValues.tileMinY,\n        tileMaxY = _this$tileValues.tileMaxY,\n        tileCenterX = _this$tileValues.tileCenterX,\n        tileCenterY = _this$tileValues.tileCenterY,\n        roundedZoom = _this$tileValues.roundedZoom,\n        scaleWidth = _this$tileValues.scaleWidth,\n        scaleHeight = _this$tileValues.scaleHeight,\n        scale = _this$tileValues.scale;\n\n    var tiles = [];\n\n    for (var i = 0; i < oldTiles.length; i++) {\n      var old = oldTiles[i];\n      var zoomDiff = old.roundedZoom - roundedZoom;\n\n      if (Math.abs(zoomDiff) > 4 || zoomDiff === 0) {\n        continue;\n      }\n\n      var pow = 1 / Math.pow(2, zoomDiff);\n      var xDiff = -(tileMinX - old.tileMinX * pow) * 256;\n      var yDiff = -(tileMinY - old.tileMinY * pow) * 256;\n\n      var _xMin = Math.max(old.tileMinX, 0);\n\n      var _yMin = Math.max(old.tileMinY, 0);\n\n      var _xMax = Math.min(old.tileMaxX, Math.pow(2, old.roundedZoom) - 1);\n\n      var _yMax = Math.min(old.tileMaxY, Math.pow(2, old.roundedZoom) - 1);\n\n      for (var x = _xMin; x <= _xMax; x++) {\n        for (var y = _yMin; y <= _yMax; y++) {\n          tiles.push({\n            key: x + \"-\" + y + \"-\" + old.roundedZoom,\n            url: mapUrl(x, y, old.roundedZoom),\n            srcSet: srcSet(dprs, mapUrl, x, y, old.roundedZoom),\n            left: xDiff + (x - old.tileMinX) * 256 * pow,\n            top: yDiff + (y - old.tileMinY) * 256 * pow,\n            width: 256 * pow,\n            height: 256 * pow,\n            active: false\n          });\n        }\n      }\n    }\n\n    var xMin = Math.max(tileMinX, 0);\n    var yMin = Math.max(tileMinY, 0);\n    var xMax = Math.min(tileMaxX, Math.pow(2, roundedZoom) - 1);\n    var yMax = Math.min(tileMaxY, Math.pow(2, roundedZoom) - 1);\n\n    for (var _x = xMin; _x <= xMax; _x++) {\n      for (var _y = yMin; _y <= yMax; _y++) {\n        tiles.push({\n          key: _x + \"-\" + _y + \"-\" + roundedZoom,\n          url: mapUrl(_x, _y, roundedZoom),\n          srcSet: srcSet(dprs, mapUrl, _x, _y, roundedZoom),\n          left: (_x - tileMinX) * 256,\n          top: (_y - tileMinY) * 256,\n          width: 256,\n          height: 256,\n          active: true\n        });\n      }\n    }\n\n    var boxStyle = {\n      width: scaleWidth,\n      height: scaleHeight,\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      overflow: 'hidden',\n      willChange: 'transform',\n      transform: \"scale(\" + scale + \", \" + scale + \")\",\n      transformOrigin: 'top left'\n    };\n    var boxClassname = this.props.boxClassname || '';\n    var left = -((tileCenterX - tileMinX) * 256 - scaleWidth / 2);\n    var top = -((tileCenterY - tileMinY) * 256 - scaleHeight / 2);\n    var tilesStyle = {\n      position: 'absolute',\n      width: (tileMaxX - tileMinX + 1) * 256,\n      height: (tileMaxY - tileMinY + 1) * 256,\n      willChange: 'transform',\n      transform: \"translate(\" + left + \"px, \" + top + \"px)\"\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: boxStyle,\n      className: boxClassname\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: tilesStyle\n    }, tiles.map(function (tile) {\n      return /*#__PURE__*/React.createElement(\"img\", {\n        key: tile.key,\n        src: tile.url,\n        srcSet: tile.srcSet,\n        width: tile.width,\n        height: tile.height,\n        loading: 'lazy',\n        onLoad: function onLoad() {\n          return _this2.imageLoaded(tile.key);\n        },\n        alt: '',\n        style: {\n          position: 'absolute',\n          left: tile.left,\n          top: tile.top,\n          willChange: 'transform',\n          transformOrigin: 'top left',\n          opacity: 1\n        }\n      });\n    })));\n  };\n\n  _proto.renderOverlays = function renderOverlays() {\n    var _this3 = this;\n\n    var _this$state11 = this.state,\n        width = _this$state11.width,\n        height = _this$state11.height,\n        center = _this$state11.center;\n    var mapState = {\n      bounds: this.getBounds(),\n      zoom: this.zoomPlusDelta(),\n      center: center,\n      width: width,\n      height: height\n    };\n    var childrenWithProps = React.Children.map(this.props.children, function (child) {\n      if (!child) {\n        return null;\n      }\n\n      if (! /*#__PURE__*/React.isValidElement(child)) {\n        return child;\n      }\n\n      var _child$props = child.props,\n          anchor = _child$props.anchor,\n          position = _child$props.position,\n          offset = _child$props.offset;\n\n      var c = _this3.latLngToPixel(anchor || position || center);\n\n      return /*#__PURE__*/React.cloneElement(child, {\n        left: c[0] - (offset ? offset[0] : 0),\n        top: c[1] - (offset ? offset[1] : 0),\n        latLngToPixel: _this3.latLngToPixel,\n        pixelToLatLng: _this3.pixelToLatLng,\n        mapState: mapState\n      });\n    });\n    var childrenStyle = {\n      position: 'absolute',\n      width: width,\n      height: height,\n      top: 0,\n      left: 0\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: childrenStyle\n    }, childrenWithProps);\n  };\n\n  _proto.renderAttribution = function renderAttribution() {\n    var _this$props4 = this.props,\n        attribution = _this$props4.attribution,\n        attributionPrefix = _this$props4.attributionPrefix;\n\n    if (attribution === false) {\n      return null;\n    }\n\n    var style = {\n      position: 'absolute',\n      bottom: 0,\n      right: 0,\n      fontSize: '11px',\n      padding: '2px 5px',\n      background: 'rgba(255, 255, 255, 0.7)',\n      fontFamily: \"'Helvetica Neue', Helvetica, Arial, sans-serif\",\n      color: '#333'\n    };\n    var linkStyle = {\n      color: '#0078A8',\n      textDecoration: 'none'\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: \"attr\",\n      className: \"pigeon-attribution\",\n      style: style\n    }, attributionPrefix === false ? null : /*#__PURE__*/React.createElement(\"span\", null, attributionPrefix || /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://pigeon-maps.js.org/\",\n      style: linkStyle,\n      target: \"_blank\",\n      rel: \"noreferrer noopener\"\n    }, \"Pigeon\"), ' | '), attribution || /*#__PURE__*/React.createElement(\"span\", null, ' © ', /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://www.openstreetmap.org/copyright\",\n      style: linkStyle,\n      target: \"_blank\",\n      rel: \"noreferrer noopener\"\n    }, \"OpenStreetMap\"), ' contributors'));\n  };\n\n  _proto.renderWarning = function renderWarning() {\n    var _this$props5 = this.props,\n        metaWheelZoom = _this$props5.metaWheelZoom,\n        metaWheelZoomWarning = _this$props5.metaWheelZoomWarning,\n        twoFingerDrag = _this$props5.twoFingerDrag,\n        twoFingerDragWarning = _this$props5.twoFingerDragWarning,\n        warningZIndex = _this$props5.warningZIndex;\n    var _this$state12 = this.state,\n        showWarning = _this$state12.showWarning,\n        warningType = _this$state12.warningType,\n        width = _this$state12.width,\n        height = _this$state12.height;\n\n    if (metaWheelZoom && metaWheelZoomWarning || twoFingerDrag && twoFingerDragWarning) {\n      var style = {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: width,\n        height: height,\n        overflow: 'hidden',\n        pointerEvents: 'none',\n        opacity: showWarning ? 100 : 0,\n        transition: 'opacity 300ms',\n        background: 'rgba(0,0,0,0.5)',\n        color: '#fff',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        fontSize: 22,\n        fontFamily: '\"Arial\", sans-serif',\n        textAlign: 'center',\n        zIndex: warningZIndex\n      };\n      var meta = typeof window !== 'undefined' && window.navigator && window.navigator.platform.toUpperCase().indexOf('MAC') >= 0 ? '⌘' : '⊞';\n      var warningText = warningType === 'fingers' ? twoFingerDragWarning : metaWheelZoomWarning;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: style\n      }, warningText.replace('META', meta));\n    } else {\n      return null;\n    }\n  };\n\n  _proto.render = function render() {\n    var _this$props6 = this.props,\n        touchEvents = _this$props6.touchEvents,\n        twoFingerDrag = _this$props6.twoFingerDrag;\n    var _this$state13 = this.state,\n        width = _this$state13.width,\n        height = _this$state13.height;\n    var containerStyle = {\n      width: this.props.width ? width : '100%',\n      height: this.props.height ? height : '100%',\n      position: 'relative',\n      display: 'inline-block',\n      overflow: 'hidden',\n      background: '#dddddd',\n      touchAction: touchEvents ? twoFingerDrag ? 'pan-x pan-y' : 'none' : 'auto'\n    };\n    var hasSize = !!(width && height);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: containerStyle,\n      ref: this.setRef\n    }, hasSize && this.renderTiles(), hasSize && this.renderOverlays(), hasSize && this.renderAttribution(), hasSize && this.renderWarning());\n  };\n\n  return Map;\n}(Component);\n\nMap.defaultProps = {\n  animate: true,\n  metaWheelZoom: false,\n  metaWheelZoomWarning: 'Use META+wheel to zoom!',\n  twoFingerDrag: false,\n  twoFingerDragWarning: 'Use two fingers to move the map',\n  zoomSnap: true,\n  mouseEvents: true,\n  touchEvents: true,\n  warningZIndex: 100,\n  animateMaxScreens: 5,\n  minZoom: 1,\n  maxZoom: 18,\n  limitBounds: 'center',\n  dprs: []\n};\n\nfunction Marker(props) {\n  var width = typeof props.width !== 'undefined' ? props.width : typeof props.height !== 'undefined' ? props.height * 29 / 34 : 29;\n  var height = typeof props.height !== 'undefined' ? props.height : typeof props.width !== 'undefined' ? props.width * 34 / 29 : 34;\n\n  var _useState = useState(props.hover || false),\n      internalHover = _useState[0],\n      setInternalHover = _useState[1];\n\n  var hover = typeof props.hover === 'undefined' ? internalHover : props.hover;\n  var color = props.color || '#93C0D0';\n\n  var eventParameters = function eventParameters(event) {\n    return {\n      event: event,\n      anchor: props.anchor,\n      payload: props.payload\n    };\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: _objectSpread2({\n      position: 'absolute',\n      transform: \"translate(\" + (props.left - width / 2) + \"px, \" + (props.top - (height - 1)) + \"px)\",\n      filter: hover ? 'drop-shadow(0 0 4px rgba(0, 0, 0, .3))' : '',\n      pointerEvents: 'none'\n    }, props.style || {}),\n    className: props.className ? props.className + \" pigeon-click-block\" : 'pigeon-click-block'\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: width,\n    height: height,\n    viewBox: \"0 0 61 71\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    style: {\n      pointerEvents: 'auto'\n    },\n    onClick: props.onClick ? function (event) {\n      return props.onClick(eventParameters(event));\n    } : null,\n    onContextMenu: props.onContextMenu ? function (event) {\n      return props.onContextMenu(eventParameters(event));\n    } : null,\n    onMouseOver: function onMouseOver(event) {\n      props.onMouseOver && props.onMouseOver(eventParameters(event));\n      setInternalHover(true);\n    },\n    onMouseOut: function onMouseOut(event) {\n      props.onMouseOut && props.onMouseOut(eventParameters(event));\n      setInternalHover(false);\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M52 31.5C52 36.8395 49.18 42.314 45.0107 47.6094C40.8672 52.872 35.619 57.678 31.1763 61.6922C30.7916 62.0398 30.2084 62.0398 29.8237 61.6922C25.381 57.678 20.1328 52.872 15.9893 47.6094C11.82 42.314 9 36.8395 9 31.5C9 18.5709 18.6801 9 30.5 9C42.3199 9 52 18.5709 52 31.5Z\",\n    fill: color,\n    stroke: \"white\",\n    strokeWidth: \"4\"\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: \"30.5\",\n    cy: \"30.5\",\n    r: \"8.5\",\n    fill: \"white\",\n    opacity: hover ? 0.98 : 0.6\n  }))));\n}\n\nfunction Overlay(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: _objectSpread2({\n      position: 'absolute',\n      transform: \"translate(\" + props.left + \"px, \" + props.top + \"px)\"\n    }, props.style || {}),\n    className: props.className ? props.className + \" pigeon-click-block\" : 'pigeon-click-block'\n  }, props.children);\n}\n\nexport default Map;\nexport { Map, Marker, Overlay };","map":{"version":3,"sources":["/home/feu/Trybe/trybe-exercises/exercises/frond-end/bloco-17-context-api-e-react-hooks/live-class/sd-14a-live-lectures-lecture-17.1/iss-location-context/node_modules/pigeon-maps/lib/index.esm.js"],"names":["React","Component","useState","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","_inheritsLoose","subClass","superClass","prototype","create","constructor","__proto__","debounce","func","wait","timeout","_len","args","Array","_key","context","clearTimeout","setTimeout","parentHasClass","element","className","classList","contains","parentElement","parentPosition","rect","getBoundingClientRect","x","left","y","top","ANIMATION_TIME","DIAGONAL_THROW_TIME","SCROLL_PIXELS_FOR_ZOOM_LEVEL","MIN_DRAG_FOR_THROW","CLICK_TOLERANCE","DOUBLE_CLICK_DELAY","DEBOUNCE_DELAY","PINCH_RELEASE_THROW_DELAY","WARNING_DISPLAY_TIMEOUT","NOOP","stamenToner","z","dpr","lng2tile","lon","zoom","Math","pow","lat2tile","lat","log","tan","PI","cos","tile2lng","tile2lat","n","atan","exp","getMousePixel","dom","event","parent","clientX","clientY","easeOutQuad","t","absoluteMinMax","hasWindow","window","performanceNow","performance","now","timeStart","Date","getTime","requestAnimationFrame","callback","cancelAnimationFrame","animFrame","srcSet","dprs","url","map","join","Map","_Component","props","_ref","_props$defaultZoom","_ref2","_props$defaultCenter","_ref3","_props$width","_ref4","_props$height","_this","call","_dragStart","_mouseDown","_moveEvents","_lastClick","_lastTap","_lastWheel","_touchStartPixel","_touchStartMidPoint","_touchStartDistance","_secondTouchEnd","_warningClearTimeout","_isAnimating","_animationStart","_animationEnd","_zoomStart","_centerTarget","_zoomTarget","_zoomAround","_animFrame","_boundsSynced","_minMaxCache","updateWidthHeight","_containerRef","width","height","setState","wa","_window","addEventListener","wr","_window2","removeEventListener","bindMouseEvents","handleMouseDown","handleMouseUp","handleMouseMove","bindTouchEvents","handleTouchStart","passive","handleTouchMove","handleTouchEnd","unbindMouseEvents","unbindTouchEvents","bindResizeEvent","unbindResizeEvent","bindWheelEvent","handleWheel","unbindWheelEvent","setCenterZoomTarget","center","fromProps","zoomAround","animationDuration","animate","distanceInScreens","state","animateMaxScreens","_this$animationStep","animationStep","centerStep","zoomStep","_centerStart","limitCenterAtZoom","_lastCenter","_lastZoom","onAnimationStart","calculateZoomCenter","stopAnimating","_center","setCenterZoom","centerTarget","zoomTarget","_this$state","l1","latLngToPixel","l2","z1","z2","w","abs","h","sqrt","timestamp","progress","max","percentage","zoomDiff","_centerStep","onAnimationStop","_this$animationStep2","minMax","getBoundsMinMax","min","isNaN","animationEnded","limitedCenter","round","tileValues","nextValues","oldTiles","o","roundedZoom","concat","loadTracker","tileMinX","tileMaxX","tileMinY","tileMaxY","_loadTracker","maybeZoom","maybeCenter","syncToProps","limitBounds","_this$state2","pixelsAtZoom","minLng","minLat","maxLng","maxLat","imageLoaded","unloadedCount","values","v","touches","touch","pixel","coordsInside","twoFingerDrag","preventDefault","latLngNow","pixelToLatLng","minZoom","maxZoom","trackMoveEvents","stopTrackingMoveEvents","pixelDelta","zoomDelta","sendDeltaChange","t1","t2","showWarning","_this$state3","midPoint","midPointDiff","distance","log2","scale","centerDiffDiff","_this$props","zoomSnap","_this$sendDeltaChange","clearWarning","oldTouchPixel","newTouchPixel","changedTouches","throwAfterMoving","latLng","ceil","floor","_zoom","button","_mousePosition","onClick","undefined","_this$sendDeltaChange2","coords","shift","_this$state4","lastEvent","deltaMs","delta","diagonal","throwTime","lng","_this$state5","getBounds","zoomPlusDelta","_this$state6","ne","sw","onBoundsChanged","bounds","initial","_this$props2","mouseEvents","metaWheelZoom","metaKey","addToZoom","deltaY","stillToAdd","zoomAroundMouse","warningType","_this$props3","_this$state7","pointDiff","tileX","tileY","_this$state8","tileCenterX","tileCenterY","oldZoom","newZoom","_this$state9","pixelBefore","pixelAfter","newCenter","setRef","defaultZoom","defaultCenter","defaultWidth","defaultHeight","_proto","componentDidMount","touchEvents","componentWillUnmount","componentDidUpdate","prevProps","_prevProps$center","currentCenter","currentZoom","_this$props$center","_this$props$zoom","nextCenter","nextZoom","_this$state10","pos","document","elementFromPoint","_ref5","scaleWidth","scaleHeight","halfWidth","halfHeight","renderTiles","_this2","mapUrl","provider","_this$tileValues","tiles","old","xDiff","yDiff","_xMin","_yMin","_xMax","_yMax","active","xMin","yMin","xMax","yMax","_x","_y","boxStyle","position","overflow","willChange","transform","transformOrigin","boxClassname","tilesStyle","createElement","style","tile","src","loading","onLoad","alt","opacity","renderOverlays","_this3","_this$state11","mapState","childrenWithProps","Children","children","child","isValidElement","_child$props","anchor","offset","c","cloneElement","childrenStyle","renderAttribution","_this$props4","attribution","attributionPrefix","bottom","right","fontSize","padding","background","fontFamily","color","linkStyle","textDecoration","href","rel","renderWarning","_this$props5","metaWheelZoomWarning","twoFingerDragWarning","warningZIndex","_this$state12","pointerEvents","transition","display","justifyContent","alignItems","textAlign","zIndex","meta","navigator","platform","toUpperCase","indexOf","warningText","replace","render","_this$props6","_this$state13","containerStyle","touchAction","hasSize","ref","defaultProps","Marker","_useState","hover","internalHover","setInternalHover","eventParameters","payload","viewBox","fill","xmlns","onContextMenu","onMouseOver","onMouseOut","d","stroke","strokeWidth","cx","cy","r","Overlay"],"mappings":"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","sourcesContent":["import React, { Component, useState } from 'react';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction debounce(func, wait) {\n  var timeout;\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var context = this;\n    clearTimeout(timeout);\n    timeout = setTimeout(function () {\n      return func.apply(context, args);\n    }, wait);\n  };\n}\nfunction parentHasClass(element, className) {\n  while (element) {\n    if (element.classList && element.classList.contains(className)) {\n      return true;\n    }\n\n    element = element.parentElement;\n  }\n\n  return false;\n}\nfunction parentPosition(element) {\n  var rect = element.getBoundingClientRect();\n  return {\n    x: rect.left,\n    y: rect.top\n  };\n}\n\nvar ANIMATION_TIME = 300;\nvar DIAGONAL_THROW_TIME = 1500;\nvar SCROLL_PIXELS_FOR_ZOOM_LEVEL = 150;\nvar MIN_DRAG_FOR_THROW = 40;\nvar CLICK_TOLERANCE = 2;\nvar DOUBLE_CLICK_DELAY = 300;\nvar DEBOUNCE_DELAY = 60;\nvar PINCH_RELEASE_THROW_DELAY = 300;\nvar WARNING_DISPLAY_TIMEOUT = 300;\n\nvar NOOP = function NOOP() {\n  return true;\n};\n\nfunction stamenToner(x, y, z, dpr) {\n  return \"https://stamen-tiles.a.ssl.fastly.net/toner/\" + z + \"/\" + x + \"/\" + y + (dpr >= 2 ? '@2x' : '') + \".png\";\n}\n\nvar lng2tile = function lng2tile(lon, zoom) {\n  return (lon + 180) / 360 * Math.pow(2, zoom);\n};\n\nvar lat2tile = function lat2tile(lat, zoom) {\n  return (1 - Math.log(Math.tan(lat * Math.PI / 180) + 1 / Math.cos(lat * Math.PI / 180)) / Math.PI) / 2 * Math.pow(2, zoom);\n};\n\nfunction tile2lng(x, z) {\n  return x / Math.pow(2, z) * 360 - 180;\n}\n\nfunction tile2lat(y, z) {\n  var n = Math.PI - 2 * Math.PI * y / Math.pow(2, z);\n  return 180 / Math.PI * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n)));\n}\n\nfunction getMousePixel(dom, event) {\n  var parent = parentPosition(dom);\n  return [event.clientX - parent.x, event.clientY - parent.y];\n}\n\nfunction easeOutQuad(t) {\n  return t * (2 - t);\n}\n\nvar absoluteMinMax = [tile2lat(Math.pow(2, 10), 10), tile2lat(0, 10), tile2lng(0, 10), tile2lng(Math.pow(2, 10), 10)];\nvar hasWindow = typeof window !== 'undefined';\nvar performanceNow = hasWindow && window.performance && window.performance.now ? function () {\n  return window.performance.now();\n} : function () {\n  var timeStart = new Date().getTime();\n  return function () {\n    return new Date().getTime() - timeStart;\n  };\n}();\n\nvar requestAnimationFrame = function requestAnimationFrame(callback) {\n  if (hasWindow) {\n    return (window.requestAnimationFrame || window.setTimeout)(callback);\n  } else {\n    callback(new Date().getTime());\n    return null;\n  }\n};\n\nvar cancelAnimationFrame = function cancelAnimationFrame(animFrame) {\n  return hasWindow && animFrame ? (window.cancelAnimationFrame || window.clearTimeout)(animFrame) : false;\n};\n\nfunction srcSet(dprs, url, x, y, z) {\n  if (!dprs || dprs.length === 0) {\n    return '';\n  }\n\n  return dprs.map(function (dpr) {\n    return url(x, y, z, dpr) + (dpr === 1 ? '' : \" \" + dpr + \"x\");\n  }).join(', ');\n}\nvar Map = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Map, _Component);\n\n  function Map(props) {\n    var _ref, _props$defaultZoom, _ref2, _props$defaultCenter, _ref3, _props$width, _ref4, _props$height;\n\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n    _this._dragStart = null;\n    _this._mouseDown = false;\n    _this._moveEvents = [];\n    _this._lastClick = null;\n    _this._lastTap = null;\n    _this._lastWheel = null;\n    _this._touchStartPixel = null;\n    _this._touchStartMidPoint = null;\n    _this._touchStartDistance = null;\n    _this._secondTouchEnd = null;\n    _this._warningClearTimeout = null;\n    _this._isAnimating = false;\n    _this._animationStart = null;\n    _this._animationEnd = null;\n    _this._zoomStart = null;\n    _this._centerTarget = null;\n    _this._zoomTarget = null;\n    _this._zoomAround = null;\n    _this._animFrame = null;\n    _this._boundsSynced = false;\n    _this._minMaxCache = null;\n\n    _this.updateWidthHeight = function () {\n      if (_this._containerRef) {\n        var rect = _this._containerRef.getBoundingClientRect();\n\n        if (rect && rect.width > 0 && rect.height > 0) {\n          _this.setState({\n            width: rect.width,\n            height: rect.height\n          });\n\n          return true;\n        }\n      }\n\n      return false;\n    };\n\n    _this.wa = function () {\n      var _window;\n\n      return (_window = window).addEventListener.apply(_window, arguments);\n    };\n\n    _this.wr = function () {\n      var _window2;\n\n      return (_window2 = window).removeEventListener.apply(_window2, arguments);\n    };\n\n    _this.bindMouseEvents = function () {\n      _this.wa('mousedown', _this.handleMouseDown);\n\n      _this.wa('mouseup', _this.handleMouseUp);\n\n      _this.wa('mousemove', _this.handleMouseMove);\n    };\n\n    _this.bindTouchEvents = function () {\n      _this.wa('touchstart', _this.handleTouchStart, {\n        passive: false\n      });\n\n      _this.wa('touchmove', _this.handleTouchMove, {\n        passive: false\n      });\n\n      _this.wa('touchend', _this.handleTouchEnd, {\n        passive: false\n      });\n    };\n\n    _this.unbindMouseEvents = function () {\n      _this.wr('mousedown', _this.handleMouseDown);\n\n      _this.wr('mouseup', _this.handleMouseUp);\n\n      _this.wr('mousemove', _this.handleMouseMove);\n    };\n\n    _this.unbindTouchEvents = function () {\n      _this.wr('touchstart', _this.handleTouchStart);\n\n      _this.wr('touchmove', _this.handleTouchMove);\n\n      _this.wr('touchend', _this.handleTouchEnd);\n    };\n\n    _this.bindResizeEvent = function () {\n      _this.wa('resize', _this.updateWidthHeight);\n    };\n\n    _this.unbindResizeEvent = function () {\n      _this.wr('resize', _this.updateWidthHeight);\n    };\n\n    _this.bindWheelEvent = function () {\n      if (_this._containerRef) {\n        _this._containerRef.addEventListener('wheel', _this.handleWheel, {\n          passive: false\n        });\n      }\n    };\n\n    _this.unbindWheelEvent = function () {\n      if (_this._containerRef) {\n        _this._containerRef.removeEventListener('wheel', _this.handleWheel);\n      }\n    };\n\n    _this.setCenterZoomTarget = function (center, zoom, fromProps, zoomAround, animationDuration) {\n      if (fromProps === void 0) {\n        fromProps = false;\n      }\n\n      if (zoomAround === void 0) {\n        zoomAround = null;\n      }\n\n      if (animationDuration === void 0) {\n        animationDuration = ANIMATION_TIME;\n      }\n\n      if (_this.props.animate && (!fromProps || _this.distanceInScreens(center, zoom, _this.state.center, _this.state.zoom) <= _this.props.animateMaxScreens)) {\n        if (_this._isAnimating) {\n          cancelAnimationFrame(_this._animFrame);\n\n          var _this$animationStep = _this.animationStep(performanceNow()),\n              centerStep = _this$animationStep.centerStep,\n              zoomStep = _this$animationStep.zoomStep;\n\n          _this._centerStart = centerStep;\n          _this._zoomStart = zoomStep;\n        } else {\n          _this._isAnimating = true;\n          _this._centerStart = _this.limitCenterAtZoom([_this._lastCenter[0], _this._lastCenter[1]], _this._lastZoom);\n          _this._zoomStart = _this._lastZoom;\n\n          _this.onAnimationStart();\n        }\n\n        _this._animationStart = performanceNow();\n        _this._animationEnd = _this._animationStart + animationDuration;\n\n        if (zoomAround) {\n          _this._zoomAround = zoomAround;\n          _this._centerTarget = _this.calculateZoomCenter(_this._lastCenter, zoomAround, _this._lastZoom, zoom);\n        } else {\n          _this._zoomAround = null;\n          _this._centerTarget = center;\n        }\n\n        _this._zoomTarget = zoom;\n        _this._animFrame = requestAnimationFrame(_this.animate);\n      } else {\n        _this.stopAnimating();\n\n        if (zoomAround) {\n          var _center = _this.calculateZoomCenter(_this._lastCenter, zoomAround, _this._lastZoom, zoom);\n\n          _this.setCenterZoom(_center, zoom, fromProps);\n        } else {\n          _this.setCenterZoom(center || _this.state.center, zoom, fromProps);\n        }\n      }\n    };\n\n    _this.distanceInScreens = function (centerTarget, zoomTarget, center, zoom) {\n      var _this$state = _this.state,\n          width = _this$state.width,\n          height = _this$state.height;\n\n      var l1 = _this.latLngToPixel(center, center, zoom);\n\n      var l2 = _this.latLngToPixel(centerTarget, center, zoom);\n\n      var z1 = _this.latLngToPixel(center, center, zoomTarget);\n\n      var z2 = _this.latLngToPixel(centerTarget, center, zoomTarget);\n\n      var w = (Math.abs(l1[0] - l2[0]) + Math.abs(z1[0] - z2[0])) / 2 / width;\n      var h = (Math.abs(l1[1] - l2[1]) + Math.abs(z1[1] - z2[1])) / 2 / height;\n      return Math.sqrt(w * w + h * h);\n    };\n\n    _this.animationStep = function (timestamp) {\n      if (!_this._animationEnd || !_this._animationStart || !_this._zoomTarget || !_this._zoomStart || !_this._centerStart || !_this._centerTarget) {\n        return {\n          centerStep: _this.state.center,\n          zoomStep: _this.state.zoom\n        };\n      }\n\n      var length = _this._animationEnd - _this._animationStart;\n      var progress = Math.max(timestamp - _this._animationStart, 0);\n      var percentage = easeOutQuad(progress / length);\n      var zoomDiff = (_this._zoomTarget - _this._zoomStart) * percentage;\n      var zoomStep = _this._zoomStart + zoomDiff;\n\n      if (_this._zoomAround) {\n        var centerStep = _this.calculateZoomCenter(_this._centerStart, _this._zoomAround, _this._zoomStart, zoomStep);\n\n        return {\n          centerStep: centerStep,\n          zoomStep: zoomStep\n        };\n      } else {\n        var _centerStep = [_this._centerStart[0] + (_this._centerTarget[0] - _this._centerStart[0]) * percentage, _this._centerStart[1] + (_this._centerTarget[1] - _this._centerStart[1]) * percentage];\n        return {\n          centerStep: _centerStep,\n          zoomStep: zoomStep\n        };\n      }\n    };\n\n    _this.animate = function (timestamp) {\n      if (!_this._animationEnd || timestamp >= _this._animationEnd) {\n        _this._isAnimating = false;\n\n        _this.setCenterZoom(_this._centerTarget, _this._zoomTarget, true);\n\n        _this.onAnimationStop();\n      } else {\n        var _this$animationStep2 = _this.animationStep(timestamp),\n            centerStep = _this$animationStep2.centerStep,\n            zoomStep = _this$animationStep2.zoomStep;\n\n        _this.setCenterZoom(centerStep, zoomStep);\n\n        _this._animFrame = requestAnimationFrame(_this.animate);\n      }\n    };\n\n    _this.stopAnimating = function () {\n      if (_this._isAnimating) {\n        _this._isAnimating = false;\n\n        _this.onAnimationStop();\n\n        cancelAnimationFrame(_this._animFrame);\n      }\n    };\n\n    _this.limitCenterAtZoom = function (center, zoom) {\n      var minMax = _this.getBoundsMinMax(zoom || _this.state.zoom);\n\n      return [Math.max(Math.min(!center || isNaN(center[0]) ? _this.state.center[0] : center[0], minMax[1]), minMax[0]), Math.max(Math.min(!center || isNaN(center[1]) ? _this.state.center[1] : center[1], minMax[3]), minMax[2])];\n    };\n\n    _this.onAnimationStart = function () {\n      _this.props.onAnimationStart && _this.props.onAnimationStart();\n    };\n\n    _this.onAnimationStop = function () {\n      _this.props.onAnimationStop && _this.props.onAnimationStop();\n    };\n\n    _this.setCenterZoom = function (center, zoom, animationEnded) {\n      if (animationEnded === void 0) {\n        animationEnded = false;\n      }\n\n      var limitedCenter = _this.limitCenterAtZoom(center, zoom);\n\n      if (zoom && Math.round(_this.state.zoom) !== Math.round(zoom)) {\n        var tileValues = _this.tileValues(_this.state);\n\n        var nextValues = _this.tileValues({\n          center: limitedCenter,\n          zoom: zoom,\n          width: _this.state.width,\n          height: _this.state.height\n        });\n\n        var oldTiles = _this.state.oldTiles;\n\n        _this.setState({\n          oldTiles: oldTiles.filter(function (o) {\n            return o.roundedZoom !== tileValues.roundedZoom;\n          }).concat(tileValues)\n        }, NOOP);\n\n        var loadTracker = {};\n\n        for (var x = nextValues.tileMinX; x <= nextValues.tileMaxX; x++) {\n          for (var y = nextValues.tileMinY; y <= nextValues.tileMaxY; y++) {\n            var key = x + \"-\" + y + \"-\" + nextValues.roundedZoom;\n            loadTracker[key] = false;\n          }\n        }\n\n        _this._loadTracker = loadTracker;\n      }\n\n      _this.setState({\n        center: limitedCenter,\n        zoom: zoom || _this.state.zoom\n      }, NOOP);\n\n      var maybeZoom = _this.props.zoom ? _this.props.zoom : _this._lastZoom;\n      var maybeCenter = _this.props.center ? _this.props.center : _this._lastCenter;\n\n      if (zoom && (animationEnded || Math.abs(maybeZoom - zoom) > 0.001 || Math.abs(maybeCenter[0] - limitedCenter[0]) > 0.00001 || Math.abs(maybeCenter[1] - limitedCenter[1]) > 0.00001)) {\n        _this._lastZoom = zoom;\n        _this._lastCenter = [].concat(limitedCenter);\n\n        _this.syncToProps(limitedCenter, zoom);\n      }\n    };\n\n    _this.getBoundsMinMax = function (zoom) {\n      if (_this.props.limitBounds === 'center') {\n        return absoluteMinMax;\n      }\n\n      var _this$state2 = _this.state,\n          width = _this$state2.width,\n          height = _this$state2.height;\n\n      if (_this._minMaxCache && _this._minMaxCache[0] === zoom && _this._minMaxCache[1] === width && _this._minMaxCache[2] === height) {\n        return _this._minMaxCache[3];\n      }\n\n      var pixelsAtZoom = Math.pow(2, zoom) * 256;\n      var minLng = width > pixelsAtZoom ? 0 : tile2lng(width / 512, zoom);\n      var minLat = height > pixelsAtZoom ? 0 : tile2lat(Math.pow(2, zoom) - height / 512, zoom);\n      var maxLng = width > pixelsAtZoom ? 0 : tile2lng(Math.pow(2, zoom) - width / 512, zoom);\n      var maxLat = height > pixelsAtZoom ? 0 : tile2lat(height / 512, zoom);\n      var minMax = [minLat, maxLat, minLng, maxLng];\n      _this._minMaxCache = [zoom, width, height, minMax];\n      return minMax;\n    };\n\n    _this.imageLoaded = function (key) {\n      if (_this._loadTracker && key in _this._loadTracker) {\n        _this._loadTracker[key] = true;\n        var unloadedCount = Object.values(_this._loadTracker).filter(function (v) {\n          return !v;\n        }).length;\n\n        if (unloadedCount === 0) {\n          _this.setState({\n            oldTiles: []\n          }, NOOP);\n        }\n      }\n    };\n\n    _this.handleTouchStart = function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      if (event.target && parentHasClass(event.target, 'pigeon-drag-block')) {\n        return;\n      }\n\n      if (event.touches.length === 1) {\n        var touch = event.touches[0];\n        var pixel = getMousePixel(_this._containerRef, touch);\n\n        if (_this.coordsInside(pixel)) {\n          _this._touchStartPixel = [pixel];\n\n          if (!_this.props.twoFingerDrag) {\n            _this.stopAnimating();\n\n            if (_this._lastTap && performanceNow() - _this._lastTap < DOUBLE_CLICK_DELAY) {\n              event.preventDefault();\n\n              var latLngNow = _this.pixelToLatLng(_this._touchStartPixel[0]);\n\n              _this.setCenterZoomTarget(null, Math.max(_this.props.minZoom, Math.min(_this.state.zoom + 1, _this.props.maxZoom)), false, latLngNow);\n            } else {\n              _this._lastTap = performanceNow();\n\n              _this.trackMoveEvents(pixel);\n            }\n          }\n        }\n      } else if (event.touches.length === 2 && _this._touchStartPixel) {\n        event.preventDefault();\n\n        _this.stopTrackingMoveEvents();\n\n        if (_this.state.pixelDelta || _this.state.zoomDelta) {\n          _this.sendDeltaChange();\n        }\n\n        var t1 = getMousePixel(_this._containerRef, event.touches[0]);\n        var t2 = getMousePixel(_this._containerRef, event.touches[1]);\n        _this._touchStartPixel = [t1, t2];\n        _this._touchStartMidPoint = [(t1[0] + t2[0]) / 2, (t1[1] + t2[1]) / 2];\n        _this._touchStartDistance = Math.sqrt(Math.pow(t1[0] - t2[0], 2) + Math.pow(t1[1] - t2[1], 2));\n      }\n    };\n\n    _this.handleTouchMove = function (event) {\n      if (!_this._containerRef) {\n        _this._touchStartPixel = null;\n        return;\n      }\n\n      if (event.touches.length === 1 && _this._touchStartPixel) {\n        var touch = event.touches[0];\n        var pixel = getMousePixel(_this._containerRef, touch);\n\n        if (_this.props.twoFingerDrag) {\n          if (_this.coordsInside(pixel)) {\n            _this.showWarning('fingers');\n          }\n        } else {\n          event.preventDefault();\n\n          _this.trackMoveEvents(pixel);\n\n          _this.setState({\n            pixelDelta: [pixel[0] - _this._touchStartPixel[0][0], pixel[1] - _this._touchStartPixel[0][1]]\n          }, NOOP);\n        }\n      } else if (event.touches.length === 2 && _this._touchStartPixel && _this._touchStartMidPoint && _this._touchStartDistance) {\n        var _this$state3 = _this.state,\n            width = _this$state3.width,\n            height = _this$state3.height,\n            zoom = _this$state3.zoom;\n        event.preventDefault();\n        var t1 = getMousePixel(_this._containerRef, event.touches[0]);\n        var t2 = getMousePixel(_this._containerRef, event.touches[1]);\n        var midPoint = [(t1[0] + t2[0]) / 2, (t1[1] + t2[1]) / 2];\n        var midPointDiff = [midPoint[0] - _this._touchStartMidPoint[0], midPoint[1] - _this._touchStartMidPoint[1]];\n        var distance = Math.sqrt(Math.pow(t1[0] - t2[0], 2) + Math.pow(t1[1] - t2[1], 2));\n        var zoomDelta = Math.max(_this.props.minZoom, Math.min(_this.props.maxZoom, zoom + Math.log2(distance / _this._touchStartDistance))) - zoom;\n        var scale = Math.pow(2, zoomDelta);\n        var centerDiffDiff = [(width / 2 - midPoint[0]) * (scale - 1), (height / 2 - midPoint[1]) * (scale - 1)];\n\n        _this.setState({\n          zoomDelta: zoomDelta,\n          pixelDelta: [centerDiffDiff[0] + midPointDiff[0] * scale, centerDiffDiff[1] + midPointDiff[1] * scale]\n        }, NOOP);\n      }\n    };\n\n    _this.handleTouchEnd = function (event) {\n      if (!_this._containerRef) {\n        _this._touchStartPixel = null;\n        return;\n      }\n\n      if (_this._touchStartPixel) {\n        var _this$props = _this.props,\n            zoomSnap = _this$props.zoomSnap,\n            twoFingerDrag = _this$props.twoFingerDrag,\n            minZoom = _this$props.minZoom,\n            maxZoom = _this$props.maxZoom;\n        var zoomDelta = _this.state.zoomDelta;\n\n        var _this$sendDeltaChange = _this.sendDeltaChange(),\n            center = _this$sendDeltaChange.center,\n            zoom = _this$sendDeltaChange.zoom;\n\n        if (event.touches.length === 0) {\n          if (twoFingerDrag) {\n            _this.clearWarning();\n          } else {\n            var oldTouchPixel = _this._touchStartPixel[0];\n            var newTouchPixel = getMousePixel(_this._containerRef, event.changedTouches[0]);\n\n            if (Math.abs(oldTouchPixel[0] - newTouchPixel[0]) > CLICK_TOLERANCE || Math.abs(oldTouchPixel[1] - newTouchPixel[1]) > CLICK_TOLERANCE) {\n              if (!_this._secondTouchEnd || performanceNow() - _this._secondTouchEnd > PINCH_RELEASE_THROW_DELAY) {\n                event.preventDefault();\n\n                _this.throwAfterMoving(newTouchPixel, center, zoom);\n              }\n            }\n\n            _this._touchStartPixel = null;\n            _this._secondTouchEnd = null;\n          }\n        } else if (event.touches.length === 1) {\n          event.preventDefault();\n          var touch = getMousePixel(_this._containerRef, event.touches[0]);\n          _this._secondTouchEnd = performanceNow();\n          _this._touchStartPixel = [touch];\n\n          _this.trackMoveEvents(touch);\n\n          if (zoomSnap) {\n            var latLng = _this._touchStartMidPoint ? _this.pixelToLatLng(_this._touchStartMidPoint) : _this.state.center;\n            var zoomTarget;\n\n            if (twoFingerDrag && Math.round(_this.state.zoom) === Math.round(_this.state.zoom + zoomDelta)) {\n              zoomTarget = Math.round(_this.state.zoom);\n            } else {\n              zoomTarget = zoomDelta > 0 ? Math.ceil(_this.state.zoom) : Math.floor(_this.state.zoom);\n            }\n\n            var _zoom = Math.max(minZoom, Math.min(zoomTarget, maxZoom));\n\n            _this.setCenterZoomTarget(latLng, _zoom, false, latLng);\n          }\n        }\n      }\n    };\n\n    _this.handleMouseDown = function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      var pixel = getMousePixel(_this._containerRef, event);\n\n      if (event.button === 0 && (!event.target || !parentHasClass(event.target, 'pigeon-drag-block')) && _this.coordsInside(pixel)) {\n        _this.stopAnimating();\n\n        event.preventDefault();\n\n        if (_this._lastClick && performanceNow() - _this._lastClick < DOUBLE_CLICK_DELAY) {\n          var latLngNow = _this.pixelToLatLng(_this._mousePosition || pixel);\n\n          _this.setCenterZoomTarget(null, Math.max(_this.props.minZoom, Math.min(_this.state.zoom + 1, _this.props.maxZoom)), false, latLngNow);\n        } else {\n          _this._lastClick = performanceNow();\n          _this._mouseDown = true;\n          _this._dragStart = pixel;\n\n          _this.trackMoveEvents(pixel);\n        }\n      }\n    };\n\n    _this.handleMouseMove = function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      _this._mousePosition = getMousePixel(_this._containerRef, event);\n\n      if (_this._mouseDown && _this._dragStart) {\n        _this.trackMoveEvents(_this._mousePosition);\n\n        _this.setState({\n          pixelDelta: [_this._mousePosition[0] - _this._dragStart[0], _this._mousePosition[1] - _this._dragStart[1]]\n        }, NOOP);\n      }\n    };\n\n    _this.handleMouseUp = function (event) {\n      if (!_this._containerRef) {\n        _this._mouseDown = false;\n        return;\n      }\n\n      var pixelDelta = _this.state.pixelDelta;\n\n      if (_this._mouseDown) {\n        _this._mouseDown = false;\n        var pixel = getMousePixel(_this._containerRef, event);\n\n        if (_this.props.onClick && (!event.target || !parentHasClass(event.target, 'pigeon-click-block')) && (!pixelDelta || Math.abs(pixelDelta[0]) + Math.abs(pixelDelta[1]) <= CLICK_TOLERANCE)) {\n          var latLng = _this.pixelToLatLng(pixel);\n\n          _this.props.onClick({\n            event: event,\n            latLng: latLng,\n            pixel: pixel\n          });\n\n          _this.setState({\n            pixelDelta: undefined\n          }, NOOP);\n        } else {\n          var _this$sendDeltaChange2 = _this.sendDeltaChange(),\n              center = _this$sendDeltaChange2.center,\n              zoom = _this$sendDeltaChange2.zoom;\n\n          _this.throwAfterMoving(pixel, center, zoom);\n        }\n      }\n    };\n\n    _this.stopTrackingMoveEvents = function () {\n      _this._moveEvents = [];\n    };\n\n    _this.trackMoveEvents = function (coords) {\n      var timestamp = performanceNow();\n\n      if (_this._moveEvents.length === 0 || timestamp - _this._moveEvents[_this._moveEvents.length - 1].timestamp > 40) {\n        _this._moveEvents.push({\n          timestamp: timestamp,\n          coords: coords\n        });\n\n        if (_this._moveEvents.length > 2) {\n          _this._moveEvents.shift();\n        }\n      }\n    };\n\n    _this.throwAfterMoving = function (coords, center, zoom) {\n      var _this$state4 = _this.state,\n          width = _this$state4.width,\n          height = _this$state4.height;\n      var animate = _this.props.animate;\n      var timestamp = performanceNow();\n\n      var lastEvent = _this._moveEvents.shift();\n\n      if (lastEvent && animate) {\n        var deltaMs = Math.max(timestamp - lastEvent.timestamp, 1);\n        var delta = [(coords[0] - lastEvent.coords[0]) / deltaMs * 120, (coords[1] - lastEvent.coords[1]) / deltaMs * 120];\n        var distance = Math.sqrt(delta[0] * delta[0] + delta[1] * delta[1]);\n\n        if (distance > MIN_DRAG_FOR_THROW) {\n          var diagonal = Math.sqrt(width * width + height * height);\n          var throwTime = DIAGONAL_THROW_TIME * distance / diagonal;\n          var lng = tile2lng(lng2tile(center[1], zoom) - delta[0] / 256.0, zoom);\n          var lat = tile2lat(lat2tile(center[0], zoom) - delta[1] / 256.0, zoom);\n\n          _this.setCenterZoomTarget([lat, lng], zoom, false, null, throwTime);\n        }\n      }\n\n      _this.stopTrackingMoveEvents();\n    };\n\n    _this.sendDeltaChange = function () {\n      var _this$state5 = _this.state,\n          center = _this$state5.center,\n          zoom = _this$state5.zoom,\n          pixelDelta = _this$state5.pixelDelta,\n          zoomDelta = _this$state5.zoomDelta;\n      var lat = center[0];\n      var lng = center[1];\n\n      if (pixelDelta || zoomDelta !== 0) {\n        lng = tile2lng(lng2tile(center[1], zoom + zoomDelta) - (pixelDelta ? pixelDelta[0] / 256.0 : 0), zoom + zoomDelta);\n        lat = tile2lat(lat2tile(center[0], zoom + zoomDelta) - (pixelDelta ? pixelDelta[1] / 256.0 : 0), zoom + zoomDelta);\n\n        _this.setCenterZoom([lat, lng], zoom + zoomDelta);\n      }\n\n      _this.setState({\n        pixelDelta: undefined,\n        zoomDelta: 0\n      }, NOOP);\n\n      return {\n        center: _this.limitCenterAtZoom([lat, lng], zoom + zoomDelta),\n        zoom: zoom + zoomDelta\n      };\n    };\n\n    _this.getBounds = function (center, zoom) {\n      if (center === void 0) {\n        center = _this.state.center;\n      }\n\n      if (zoom === void 0) {\n        zoom = _this.zoomPlusDelta();\n      }\n\n      var _this$state6 = _this.state,\n          width = _this$state6.width,\n          height = _this$state6.height;\n      return {\n        ne: _this.pixelToLatLng([width - 1, 0], center, zoom),\n        sw: _this.pixelToLatLng([0, height - 1], center, zoom)\n      };\n    };\n\n    _this.syncToProps = function (center, zoom) {\n      if (center === void 0) {\n        center = _this.state.center;\n      }\n\n      if (zoom === void 0) {\n        zoom = _this.state.zoom;\n      }\n\n      var onBoundsChanged = _this.props.onBoundsChanged;\n\n      if (onBoundsChanged) {\n        var bounds = _this.getBounds(center, zoom);\n\n        onBoundsChanged({\n          center: center,\n          zoom: zoom,\n          bounds: bounds,\n          initial: !_this._boundsSynced\n        });\n        _this._boundsSynced = true;\n      }\n    };\n\n    _this.handleWheel = function (event) {\n      var _this$props2 = _this.props,\n          mouseEvents = _this$props2.mouseEvents,\n          metaWheelZoom = _this$props2.metaWheelZoom,\n          zoomSnap = _this$props2.zoomSnap,\n          animate = _this$props2.animate;\n\n      if (!mouseEvents) {\n        return;\n      }\n\n      if (!metaWheelZoom || event.metaKey) {\n        event.preventDefault();\n        var addToZoom = -event.deltaY / SCROLL_PIXELS_FOR_ZOOM_LEVEL;\n\n        if (!zoomSnap && _this._zoomTarget) {\n          var stillToAdd = _this._zoomTarget - _this.state.zoom;\n\n          _this.zoomAroundMouse(addToZoom + stillToAdd, event);\n        } else {\n          if (animate) {\n            _this.zoomAroundMouse(addToZoom, event);\n          } else {\n            if (!_this._lastWheel || performanceNow() - _this._lastWheel > ANIMATION_TIME) {\n              _this._lastWheel = performanceNow();\n\n              _this.zoomAroundMouse(addToZoom, event);\n            }\n          }\n        }\n      } else {\n        _this.showWarning('wheel');\n      }\n    };\n\n    _this.showWarning = function (warningType) {\n      if (!_this.state.showWarning || _this.state.warningType !== warningType) {\n        _this.setState({\n          showWarning: true,\n          warningType: warningType\n        });\n      }\n\n      if (_this._warningClearTimeout) {\n        window.clearTimeout(_this._warningClearTimeout);\n      }\n\n      _this._warningClearTimeout = window.setTimeout(_this.clearWarning, WARNING_DISPLAY_TIMEOUT);\n    };\n\n    _this.clearWarning = function () {\n      if (_this.state.showWarning) {\n        _this.setState({\n          showWarning: false\n        });\n      }\n    };\n\n    _this.zoomAroundMouse = function (zoomDiff, event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      var zoom = _this.state.zoom;\n      var _this$props3 = _this.props,\n          minZoom = _this$props3.minZoom,\n          maxZoom = _this$props3.maxZoom,\n          zoomSnap = _this$props3.zoomSnap;\n      _this._mousePosition = getMousePixel(_this._containerRef, event);\n\n      if (!_this._mousePosition || zoom === minZoom && zoomDiff < 0 || zoom === maxZoom && zoomDiff > 0) {\n        return;\n      }\n\n      var latLngNow = _this.pixelToLatLng(_this._mousePosition);\n\n      var zoomTarget = zoom + zoomDiff;\n\n      if (zoomSnap) {\n        zoomTarget = zoomDiff < 0 ? Math.floor(zoomTarget) : Math.ceil(zoomTarget);\n      }\n\n      zoomTarget = Math.max(minZoom, Math.min(zoomTarget, maxZoom));\n\n      _this.setCenterZoomTarget(null, zoomTarget, false, latLngNow);\n    };\n\n    _this.zoomPlusDelta = function () {\n      return _this.state.zoom + _this.state.zoomDelta;\n    };\n\n    _this.pixelToLatLng = function (pixel, center, zoom) {\n      if (center === void 0) {\n        center = _this.state.center;\n      }\n\n      if (zoom === void 0) {\n        zoom = _this.zoomPlusDelta();\n      }\n\n      var _this$state7 = _this.state,\n          width = _this$state7.width,\n          height = _this$state7.height,\n          pixelDelta = _this$state7.pixelDelta;\n      var pointDiff = [(pixel[0] - width / 2 - (pixelDelta ? pixelDelta[0] : 0)) / 256.0, (pixel[1] - height / 2 - (pixelDelta ? pixelDelta[1] : 0)) / 256.0];\n      var tileX = lng2tile(center[1], zoom) + pointDiff[0];\n      var tileY = lat2tile(center[0], zoom) + pointDiff[1];\n      return [Math.max(absoluteMinMax[0], Math.min(absoluteMinMax[1], tile2lat(tileY, zoom))), Math.max(absoluteMinMax[2], Math.min(absoluteMinMax[3], tile2lng(tileX, zoom)))];\n    };\n\n    _this.latLngToPixel = function (latLng, center, zoom) {\n      if (center === void 0) {\n        center = _this.state.center;\n      }\n\n      if (zoom === void 0) {\n        zoom = _this.zoomPlusDelta();\n      }\n\n      var _this$state8 = _this.state,\n          width = _this$state8.width,\n          height = _this$state8.height,\n          pixelDelta = _this$state8.pixelDelta;\n      var tileCenterX = lng2tile(center[1], zoom);\n      var tileCenterY = lat2tile(center[0], zoom);\n      var tileX = lng2tile(latLng[1], zoom);\n      var tileY = lat2tile(latLng[0], zoom);\n      return [(tileX - tileCenterX) * 256.0 + width / 2 + (pixelDelta ? pixelDelta[0] : 0), (tileY - tileCenterY) * 256.0 + height / 2 + (pixelDelta ? pixelDelta[1] : 0)];\n    };\n\n    _this.calculateZoomCenter = function (center, coords, oldZoom, newZoom) {\n      var _this$state9 = _this.state,\n          width = _this$state9.width,\n          height = _this$state9.height;\n\n      var pixelBefore = _this.latLngToPixel(coords, center, oldZoom);\n\n      var pixelAfter = _this.latLngToPixel(coords, center, newZoom);\n\n      var newCenter = _this.pixelToLatLng([width / 2 + pixelAfter[0] - pixelBefore[0], height / 2 + pixelAfter[1] - pixelBefore[1]], center, newZoom);\n\n      return _this.limitCenterAtZoom(newCenter, newZoom);\n    };\n\n    _this.setRef = function (dom) {\n      _this._containerRef = dom;\n    };\n\n    _this.syncToProps = debounce(_this.syncToProps, DEBOUNCE_DELAY);\n    _this._lastZoom = (_ref = (_props$defaultZoom = props.defaultZoom) !== null && _props$defaultZoom !== void 0 ? _props$defaultZoom : props.zoom) !== null && _ref !== void 0 ? _ref : 14;\n    _this._lastCenter = (_ref2 = (_props$defaultCenter = props.defaultCenter) !== null && _props$defaultCenter !== void 0 ? _props$defaultCenter : props.center) !== null && _ref2 !== void 0 ? _ref2 : [0, 0];\n    _this.state = {\n      zoom: _this._lastZoom,\n      center: _this._lastCenter,\n      width: (_ref3 = (_props$width = props.width) !== null && _props$width !== void 0 ? _props$width : props.defaultWidth) !== null && _ref3 !== void 0 ? _ref3 : -1,\n      height: (_ref4 = (_props$height = props.height) !== null && _props$height !== void 0 ? _props$height : props.defaultHeight) !== null && _ref4 !== void 0 ? _ref4 : -1,\n      zoomDelta: 0,\n      pixelDelta: undefined,\n      oldTiles: [],\n      showWarning: false,\n      warningType: undefined\n    };\n    return _this;\n  }\n\n  var _proto = Map.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.props.mouseEvents && this.bindMouseEvents();\n    this.props.touchEvents && this.bindTouchEvents();\n\n    if (!this.props.width || !this.props.height) {\n      if (!this.updateWidthHeight()) {\n        requestAnimationFrame(this.updateWidthHeight);\n      }\n\n      this.bindResizeEvent();\n    }\n\n    this.bindWheelEvent();\n    this.syncToProps();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.props.mouseEvents && this.unbindMouseEvents();\n    this.props.touchEvents && this.unbindTouchEvents();\n    this.unbindWheelEvent();\n\n    if (!this.props.width || !this.props.height) {\n      this.unbindResizeEvent();\n    }\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var _prevProps$center;\n\n    if (this.props.mouseEvents !== prevProps.mouseEvents) {\n      this.props.mouseEvents ? this.bindMouseEvents() : this.unbindMouseEvents();\n    }\n\n    if (this.props.touchEvents !== prevProps.touchEvents) {\n      this.props.touchEvents ? this.bindTouchEvents() : this.unbindTouchEvents();\n    }\n\n    if (this.props.width && this.props.width !== prevProps.width) {\n      this.setState({\n        width: this.props.width\n      });\n    }\n\n    if (this.props.height && this.props.height !== prevProps.height) {\n      this.setState({\n        height: this.props.height\n      });\n    }\n\n    if (!this.props.center && !this.props.zoom) {\n      return;\n    }\n\n    if ((!this.props.center || this.props.center[0] === (prevProps === null || prevProps === void 0 ? void 0 : (_prevProps$center = prevProps.center) === null || _prevProps$center === void 0 ? void 0 : _prevProps$center[0]) && this.props.center[1] === prevProps.center[1]) && this.props.zoom === prevProps.zoom) {\n      return;\n    }\n\n    var currentCenter = this._isAnimating ? this._centerTarget : this.state.center;\n    var currentZoom = this._isAnimating ? this._zoomTarget : this.state.zoom;\n\n    if (currentCenter && currentZoom) {\n      var _this$props$center, _this$props$zoom;\n\n      var nextCenter = (_this$props$center = this.props.center) !== null && _this$props$center !== void 0 ? _this$props$center : currentCenter;\n      var nextZoom = (_this$props$zoom = this.props.zoom) !== null && _this$props$zoom !== void 0 ? _this$props$zoom : currentZoom;\n\n      if (Math.abs(nextZoom - currentZoom) > 0.001 || Math.abs(nextCenter[0] - currentCenter[0]) > 0.0001 || Math.abs(nextCenter[1] - currentCenter[1]) > 0.0001) {\n        this.setCenterZoomTarget(nextCenter, nextZoom, true);\n      }\n    }\n  };\n\n  _proto.coordsInside = function coordsInside(pixel) {\n    var _this$state10 = this.state,\n        width = _this$state10.width,\n        height = _this$state10.height;\n\n    if (pixel[0] < 0 || pixel[1] < 0 || pixel[0] >= width || pixel[1] >= height) {\n      return false;\n    }\n\n    var parent = this._containerRef;\n\n    if (parent) {\n      var pos = parentPosition(parent);\n      var element = document.elementFromPoint(pixel[0] + pos.x, pixel[1] + pos.y);\n      return parent === element || parent.contains(element);\n    } else {\n      return false;\n    }\n  };\n\n  _proto.tileValues = function tileValues(_ref5) {\n    var center = _ref5.center,\n        zoom = _ref5.zoom,\n        pixelDelta = _ref5.pixelDelta,\n        zoomDelta = _ref5.zoomDelta,\n        width = _ref5.width,\n        height = _ref5.height;\n    var roundedZoom = Math.round(zoom + (zoomDelta || 0));\n    var zoomDiff = zoom + (zoomDelta || 0) - roundedZoom;\n    var scale = Math.pow(2, zoomDiff);\n    var scaleWidth = width / scale;\n    var scaleHeight = height / scale;\n    var tileCenterX = lng2tile(center[1], roundedZoom) - (pixelDelta ? pixelDelta[0] / 256.0 / scale : 0);\n    var tileCenterY = lat2tile(center[0], roundedZoom) - (pixelDelta ? pixelDelta[1] / 256.0 / scale : 0);\n    var halfWidth = scaleWidth / 2 / 256.0;\n    var halfHeight = scaleHeight / 2 / 256.0;\n    var tileMinX = Math.floor(tileCenterX - halfWidth);\n    var tileMaxX = Math.floor(tileCenterX + halfWidth);\n    var tileMinY = Math.floor(tileCenterY - halfHeight);\n    var tileMaxY = Math.floor(tileCenterY + halfHeight);\n    return {\n      tileMinX: tileMinX,\n      tileMaxX: tileMaxX,\n      tileMinY: tileMinY,\n      tileMaxY: tileMaxY,\n      tileCenterX: tileCenterX,\n      tileCenterY: tileCenterY,\n      roundedZoom: roundedZoom,\n      zoomDelta: zoomDelta || 0,\n      scaleWidth: scaleWidth,\n      scaleHeight: scaleHeight,\n      scale: scale\n    };\n  };\n\n  _proto.renderTiles = function renderTiles() {\n    var _this2 = this;\n\n    var oldTiles = this.state.oldTiles;\n    var dprs = this.props.dprs;\n    var mapUrl = this.props.provider || stamenToner;\n\n    var _this$tileValues = this.tileValues(this.state),\n        tileMinX = _this$tileValues.tileMinX,\n        tileMaxX = _this$tileValues.tileMaxX,\n        tileMinY = _this$tileValues.tileMinY,\n        tileMaxY = _this$tileValues.tileMaxY,\n        tileCenterX = _this$tileValues.tileCenterX,\n        tileCenterY = _this$tileValues.tileCenterY,\n        roundedZoom = _this$tileValues.roundedZoom,\n        scaleWidth = _this$tileValues.scaleWidth,\n        scaleHeight = _this$tileValues.scaleHeight,\n        scale = _this$tileValues.scale;\n\n    var tiles = [];\n\n    for (var i = 0; i < oldTiles.length; i++) {\n      var old = oldTiles[i];\n      var zoomDiff = old.roundedZoom - roundedZoom;\n\n      if (Math.abs(zoomDiff) > 4 || zoomDiff === 0) {\n        continue;\n      }\n\n      var pow = 1 / Math.pow(2, zoomDiff);\n      var xDiff = -(tileMinX - old.tileMinX * pow) * 256;\n      var yDiff = -(tileMinY - old.tileMinY * pow) * 256;\n\n      var _xMin = Math.max(old.tileMinX, 0);\n\n      var _yMin = Math.max(old.tileMinY, 0);\n\n      var _xMax = Math.min(old.tileMaxX, Math.pow(2, old.roundedZoom) - 1);\n\n      var _yMax = Math.min(old.tileMaxY, Math.pow(2, old.roundedZoom) - 1);\n\n      for (var x = _xMin; x <= _xMax; x++) {\n        for (var y = _yMin; y <= _yMax; y++) {\n          tiles.push({\n            key: x + \"-\" + y + \"-\" + old.roundedZoom,\n            url: mapUrl(x, y, old.roundedZoom),\n            srcSet: srcSet(dprs, mapUrl, x, y, old.roundedZoom),\n            left: xDiff + (x - old.tileMinX) * 256 * pow,\n            top: yDiff + (y - old.tileMinY) * 256 * pow,\n            width: 256 * pow,\n            height: 256 * pow,\n            active: false\n          });\n        }\n      }\n    }\n\n    var xMin = Math.max(tileMinX, 0);\n    var yMin = Math.max(tileMinY, 0);\n    var xMax = Math.min(tileMaxX, Math.pow(2, roundedZoom) - 1);\n    var yMax = Math.min(tileMaxY, Math.pow(2, roundedZoom) - 1);\n\n    for (var _x = xMin; _x <= xMax; _x++) {\n      for (var _y = yMin; _y <= yMax; _y++) {\n        tiles.push({\n          key: _x + \"-\" + _y + \"-\" + roundedZoom,\n          url: mapUrl(_x, _y, roundedZoom),\n          srcSet: srcSet(dprs, mapUrl, _x, _y, roundedZoom),\n          left: (_x - tileMinX) * 256,\n          top: (_y - tileMinY) * 256,\n          width: 256,\n          height: 256,\n          active: true\n        });\n      }\n    }\n\n    var boxStyle = {\n      width: scaleWidth,\n      height: scaleHeight,\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      overflow: 'hidden',\n      willChange: 'transform',\n      transform: \"scale(\" + scale + \", \" + scale + \")\",\n      transformOrigin: 'top left'\n    };\n    var boxClassname = this.props.boxClassname || '';\n    var left = -((tileCenterX - tileMinX) * 256 - scaleWidth / 2);\n    var top = -((tileCenterY - tileMinY) * 256 - scaleHeight / 2);\n    var tilesStyle = {\n      position: 'absolute',\n      width: (tileMaxX - tileMinX + 1) * 256,\n      height: (tileMaxY - tileMinY + 1) * 256,\n      willChange: 'transform',\n      transform: \"translate(\" + left + \"px, \" + top + \"px)\"\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: boxStyle,\n      className: boxClassname\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: tilesStyle\n    }, tiles.map(function (tile) {\n      return /*#__PURE__*/React.createElement(\"img\", {\n        key: tile.key,\n        src: tile.url,\n        srcSet: tile.srcSet,\n        width: tile.width,\n        height: tile.height,\n        loading: 'lazy',\n        onLoad: function onLoad() {\n          return _this2.imageLoaded(tile.key);\n        },\n        alt: '',\n        style: {\n          position: 'absolute',\n          left: tile.left,\n          top: tile.top,\n          willChange: 'transform',\n          transformOrigin: 'top left',\n          opacity: 1\n        }\n      });\n    })));\n  };\n\n  _proto.renderOverlays = function renderOverlays() {\n    var _this3 = this;\n\n    var _this$state11 = this.state,\n        width = _this$state11.width,\n        height = _this$state11.height,\n        center = _this$state11.center;\n    var mapState = {\n      bounds: this.getBounds(),\n      zoom: this.zoomPlusDelta(),\n      center: center,\n      width: width,\n      height: height\n    };\n    var childrenWithProps = React.Children.map(this.props.children, function (child) {\n      if (!child) {\n        return null;\n      }\n\n      if (! /*#__PURE__*/React.isValidElement(child)) {\n        return child;\n      }\n\n      var _child$props = child.props,\n          anchor = _child$props.anchor,\n          position = _child$props.position,\n          offset = _child$props.offset;\n\n      var c = _this3.latLngToPixel(anchor || position || center);\n\n      return /*#__PURE__*/React.cloneElement(child, {\n        left: c[0] - (offset ? offset[0] : 0),\n        top: c[1] - (offset ? offset[1] : 0),\n        latLngToPixel: _this3.latLngToPixel,\n        pixelToLatLng: _this3.pixelToLatLng,\n        mapState: mapState\n      });\n    });\n    var childrenStyle = {\n      position: 'absolute',\n      width: width,\n      height: height,\n      top: 0,\n      left: 0\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: childrenStyle\n    }, childrenWithProps);\n  };\n\n  _proto.renderAttribution = function renderAttribution() {\n    var _this$props4 = this.props,\n        attribution = _this$props4.attribution,\n        attributionPrefix = _this$props4.attributionPrefix;\n\n    if (attribution === false) {\n      return null;\n    }\n\n    var style = {\n      position: 'absolute',\n      bottom: 0,\n      right: 0,\n      fontSize: '11px',\n      padding: '2px 5px',\n      background: 'rgba(255, 255, 255, 0.7)',\n      fontFamily: \"'Helvetica Neue', Helvetica, Arial, sans-serif\",\n      color: '#333'\n    };\n    var linkStyle = {\n      color: '#0078A8',\n      textDecoration: 'none'\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: \"attr\",\n      className: \"pigeon-attribution\",\n      style: style\n    }, attributionPrefix === false ? null : /*#__PURE__*/React.createElement(\"span\", null, attributionPrefix || /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://pigeon-maps.js.org/\",\n      style: linkStyle,\n      target: \"_blank\",\n      rel: \"noreferrer noopener\"\n    }, \"Pigeon\"), ' | '), attribution || /*#__PURE__*/React.createElement(\"span\", null, ' © ', /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://www.openstreetmap.org/copyright\",\n      style: linkStyle,\n      target: \"_blank\",\n      rel: \"noreferrer noopener\"\n    }, \"OpenStreetMap\"), ' contributors'));\n  };\n\n  _proto.renderWarning = function renderWarning() {\n    var _this$props5 = this.props,\n        metaWheelZoom = _this$props5.metaWheelZoom,\n        metaWheelZoomWarning = _this$props5.metaWheelZoomWarning,\n        twoFingerDrag = _this$props5.twoFingerDrag,\n        twoFingerDragWarning = _this$props5.twoFingerDragWarning,\n        warningZIndex = _this$props5.warningZIndex;\n    var _this$state12 = this.state,\n        showWarning = _this$state12.showWarning,\n        warningType = _this$state12.warningType,\n        width = _this$state12.width,\n        height = _this$state12.height;\n\n    if (metaWheelZoom && metaWheelZoomWarning || twoFingerDrag && twoFingerDragWarning) {\n      var style = {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: width,\n        height: height,\n        overflow: 'hidden',\n        pointerEvents: 'none',\n        opacity: showWarning ? 100 : 0,\n        transition: 'opacity 300ms',\n        background: 'rgba(0,0,0,0.5)',\n        color: '#fff',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        fontSize: 22,\n        fontFamily: '\"Arial\", sans-serif',\n        textAlign: 'center',\n        zIndex: warningZIndex\n      };\n      var meta = typeof window !== 'undefined' && window.navigator && window.navigator.platform.toUpperCase().indexOf('MAC') >= 0 ? '⌘' : '⊞';\n      var warningText = warningType === 'fingers' ? twoFingerDragWarning : metaWheelZoomWarning;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: style\n      }, warningText.replace('META', meta));\n    } else {\n      return null;\n    }\n  };\n\n  _proto.render = function render() {\n    var _this$props6 = this.props,\n        touchEvents = _this$props6.touchEvents,\n        twoFingerDrag = _this$props6.twoFingerDrag;\n    var _this$state13 = this.state,\n        width = _this$state13.width,\n        height = _this$state13.height;\n    var containerStyle = {\n      width: this.props.width ? width : '100%',\n      height: this.props.height ? height : '100%',\n      position: 'relative',\n      display: 'inline-block',\n      overflow: 'hidden',\n      background: '#dddddd',\n      touchAction: touchEvents ? twoFingerDrag ? 'pan-x pan-y' : 'none' : 'auto'\n    };\n    var hasSize = !!(width && height);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: containerStyle,\n      ref: this.setRef\n    }, hasSize && this.renderTiles(), hasSize && this.renderOverlays(), hasSize && this.renderAttribution(), hasSize && this.renderWarning());\n  };\n\n  return Map;\n}(Component);\nMap.defaultProps = {\n  animate: true,\n  metaWheelZoom: false,\n  metaWheelZoomWarning: 'Use META+wheel to zoom!',\n  twoFingerDrag: false,\n  twoFingerDragWarning: 'Use two fingers to move the map',\n  zoomSnap: true,\n  mouseEvents: true,\n  touchEvents: true,\n  warningZIndex: 100,\n  animateMaxScreens: 5,\n  minZoom: 1,\n  maxZoom: 18,\n  limitBounds: 'center',\n  dprs: []\n};\n\nfunction Marker(props) {\n  var width = typeof props.width !== 'undefined' ? props.width : typeof props.height !== 'undefined' ? props.height * 29 / 34 : 29;\n  var height = typeof props.height !== 'undefined' ? props.height : typeof props.width !== 'undefined' ? props.width * 34 / 29 : 34;\n\n  var _useState = useState(props.hover || false),\n      internalHover = _useState[0],\n      setInternalHover = _useState[1];\n\n  var hover = typeof props.hover === 'undefined' ? internalHover : props.hover;\n  var color = props.color || '#93C0D0';\n\n  var eventParameters = function eventParameters(event) {\n    return {\n      event: event,\n      anchor: props.anchor,\n      payload: props.payload\n    };\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: _objectSpread2({\n      position: 'absolute',\n      transform: \"translate(\" + (props.left - width / 2) + \"px, \" + (props.top - (height - 1)) + \"px)\",\n      filter: hover ? 'drop-shadow(0 0 4px rgba(0, 0, 0, .3))' : '',\n      pointerEvents: 'none'\n    }, props.style || {}),\n    className: props.className ? props.className + \" pigeon-click-block\" : 'pigeon-click-block'\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: width,\n    height: height,\n    viewBox: \"0 0 61 71\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    style: {\n      pointerEvents: 'auto'\n    },\n    onClick: props.onClick ? function (event) {\n      return props.onClick(eventParameters(event));\n    } : null,\n    onContextMenu: props.onContextMenu ? function (event) {\n      return props.onContextMenu(eventParameters(event));\n    } : null,\n    onMouseOver: function onMouseOver(event) {\n      props.onMouseOver && props.onMouseOver(eventParameters(event));\n      setInternalHover(true);\n    },\n    onMouseOut: function onMouseOut(event) {\n      props.onMouseOut && props.onMouseOut(eventParameters(event));\n      setInternalHover(false);\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M52 31.5C52 36.8395 49.18 42.314 45.0107 47.6094C40.8672 52.872 35.619 57.678 31.1763 61.6922C30.7916 62.0398 30.2084 62.0398 29.8237 61.6922C25.381 57.678 20.1328 52.872 15.9893 47.6094C11.82 42.314 9 36.8395 9 31.5C9 18.5709 18.6801 9 30.5 9C42.3199 9 52 18.5709 52 31.5Z\",\n    fill: color,\n    stroke: \"white\",\n    strokeWidth: \"4\"\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: \"30.5\",\n    cy: \"30.5\",\n    r: \"8.5\",\n    fill: \"white\",\n    opacity: hover ? 0.98 : 0.6\n  }))));\n}\n\nfunction Overlay(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: _objectSpread2({\n      position: 'absolute',\n      transform: \"translate(\" + props.left + \"px, \" + props.top + \"px)\"\n    }, props.style || {}),\n    className: props.className ? props.className + \" pigeon-click-block\" : 'pigeon-click-block'\n  }, props.children);\n}\n\nexport default Map;\nexport { Map, Marker, Overlay };\n"]},"metadata":{},"sourceType":"module"}